import{aD as Cn,cZ as Re,b as ht,aE as Ht,a4 as Pn,e as Kt,f as Xt,h as Vt}from"./index.293c77a4.js";import{W as jn}from"./errors-d961f852.browser.esm.61f33de0.js";import{n as vr}from"./normalizeChainId-e4cc0175.browser.esm.042707b7.js";var _e=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(_e||{}),rt=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(rt||{}),Et=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e))(Et||{}),W=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_auth_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="mc_get_wallet_info",e.ShowUI="mc_wallet",e.NFTPurchase="magic_nft_purchase",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.UpdatePhoneNumber="magic_auth_update_phone_number",e.UpdatePhoneNumberTestMode="magic_auth_update_phone_number_testing_mode",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e))(W||{}),Oe=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e))(Oe||{}),Ve=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(Ve||{}),Dn=(e=>(e.Harmony="HARMONY",e))(Dn||{}),kn=Object.create,nt=Object.defineProperty,xn=Object.defineProperties,Un=Object.getOwnPropertyDescriptor,Bn=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertyNames,Yt=Object.getOwnPropertySymbols,Gn=Object.getPrototypeOf,mr=Object.prototype.hasOwnProperty,qn=Object.prototype.propertyIsEnumerable,Jt=(e,t,r)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gr=(e,t)=>{for(var r in t||(t={}))mr.call(t,r)&&Jt(e,r,t[r]);if(Yt)for(var r of Yt(t))qn.call(t,r)&&Jt(e,r,t[r]);return e},Wn=(e,t)=>xn(e,Bn(t)),zn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Hn=(e,t)=>{for(var r in t)nt(e,r,{get:t[r],enumerable:!0})},Kn=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Fn(t))!mr.call(e,s)&&s!==r&&nt(e,s,{get:()=>t[s],enumerable:!(o=Un(t,s))||o.enumerable});return e},Xn=(e,t,r)=>(r=e!=null?kn(Gn(e)):{},Kn(t||!e||!e.__esModule?nt(r,"default",{value:e,enumerable:!0}):r,e)),de=(e,t,r)=>new Promise((o,s)=>{var c=m=>{try{h(r.next(m))}catch(v){s(v)}},E=m=>{try{h(r.throw(m))}catch(v){s(v)}},h=m=>m.done?o(m.value):Promise.resolve(m.value).then(c,E);h((r=r.apply(e,t)).next())}),Vn=zn((e,t)=>{var r=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function c(v,y,p){this.fn=v,this.context=y,this.once=p||!1}function E(v,y,p,S,$){if(typeof p!="function")throw new TypeError("The listener must be a function");var P=new c(p,S||v,$),T=o?o+y:y;return v._events[T]?v._events[T].fn?v._events[T]=[v._events[T],P]:v._events[T].push(P):(v._events[T]=P,v._eventsCount++),v}function h(v,y){--v._eventsCount===0?v._events=new s:delete v._events[y]}function m(){this._events=new s,this._eventsCount=0}m.prototype.eventNames=function(){var v=[],y,p;if(this._eventsCount===0)return v;for(p in y=this._events)r.call(y,p)&&v.push(o?p.slice(1):p);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(y)):v},m.prototype.listeners=function(v){var y=o?o+v:v,p=this._events[y];if(!p)return[];if(p.fn)return[p.fn];for(var S=0,$=p.length,P=new Array($);S<$;S++)P[S]=p[S].fn;return P},m.prototype.listenerCount=function(v){var y=o?o+v:v,p=this._events[y];return p?p.fn?1:p.length:0},m.prototype.emit=function(v,y,p,S,$,P){var T=o?o+v:v;if(!this._events[T])return!1;var d=this._events[T],N=arguments.length,C,M;if(d.fn){switch(d.once&&this.removeListener(v,d.fn,void 0,!0),N){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,y),!0;case 3:return d.fn.call(d.context,y,p),!0;case 4:return d.fn.call(d.context,y,p,S),!0;case 5:return d.fn.call(d.context,y,p,S,$),!0;case 6:return d.fn.call(d.context,y,p,S,$,P),!0}for(M=1,C=new Array(N-1);M<N;M++)C[M-1]=arguments[M];d.fn.apply(d.context,C)}else{var F=d.length,I;for(M=0;M<F;M++)switch(d[M].once&&this.removeListener(v,d[M].fn,void 0,!0),N){case 1:d[M].fn.call(d[M].context);break;case 2:d[M].fn.call(d[M].context,y);break;case 3:d[M].fn.call(d[M].context,y,p);break;case 4:d[M].fn.call(d[M].context,y,p,S);break;default:if(!C)for(I=1,C=new Array(N-1);I<N;I++)C[I-1]=arguments[I];d[M].fn.apply(d[M].context,C)}}return!0},m.prototype.on=function(v,y,p){return E(this,v,y,p,!1)},m.prototype.once=function(v,y,p){return E(this,v,y,p,!0)},m.prototype.removeListener=function(v,y,p,S){var $=o?o+v:v;if(!this._events[$])return this;if(!y)return h(this,$),this;var P=this._events[$];if(P.fn)P.fn===y&&(!S||P.once)&&(!p||P.context===p)&&h(this,$);else{for(var T=0,d=[],N=P.length;T<N;T++)(P[T].fn!==y||S&&!P[T].once||p&&P[T].context!==p)&&d.push(P[T]);d.length?this._events[$]=d.length===1?d[0]:d:h(this,$)}return this},m.prototype.removeAllListeners=function(v){var y;return v?(y=o?o+v:v,this._events[y]&&h(this,y)):(this._events=new s,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=o,m.EventEmitter=m,typeof t<"u"&&(t.exports=m)});function Yn(e){let t={exports:{}};return e(t,t.exports),t.exports}var Jn=Number.MAX_SAFE_INTEGER||9007199254740991,It={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Jn,MAX_SAFE_COMPONENT_LENGTH:16},Qn=typeof Cn.exports=="object"&&{}&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},K=Qn,ke=Yn(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r}=It,o=(t=e.exports={}).re=[],s=t.src=[],c=t.t={},E=0,h=(m,v,y)=>{let p=E++;K(p,v),c[m]=p,s[p]=v,o[p]=new RegExp(v,y?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","[0-9]+"),h("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),h("MAINVERSION",`(${s[c.NUMERICIDENTIFIER]})\\.(${s[c.NUMERICIDENTIFIER]})\\.(${s[c.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${s[c.NUMERICIDENTIFIERLOOSE]})\\.(${s[c.NUMERICIDENTIFIERLOOSE]})\\.(${s[c.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${s[c.NUMERICIDENTIFIER]}|${s[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${s[c.NUMERICIDENTIFIERLOOSE]}|${s[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${s[c.PRERELEASEIDENTIFIER]}(?:\\.${s[c.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${s[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[c.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER","[0-9A-Za-z-]+"),h("BUILD",`(?:\\+(${s[c.BUILDIDENTIFIER]}(?:\\.${s[c.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${s[c.MAINVERSION]}${s[c.PRERELEASE]}?${s[c.BUILD]}?`),h("FULL",`^${s[c.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${s[c.MAINVERSIONLOOSE]}${s[c.PRERELEASELOOSE]}?${s[c.BUILD]}?`),h("LOOSE",`^${s[c.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${s[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${s[c.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${s[c.XRANGEIDENTIFIER]})(?:\\.(${s[c.XRANGEIDENTIFIER]})(?:\\.(${s[c.XRANGEIDENTIFIER]})(?:${s[c.PRERELEASE]})?${s[c.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${s[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[c.XRANGEIDENTIFIERLOOSE]})(?:${s[c.PRERELEASELOOSE]})?${s[c.BUILD]}?)?)?`),h("XRANGE",`^${s[c.GTLT]}\\s*${s[c.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${s[c.GTLT]}\\s*${s[c.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),h("COERCERTL",s[c.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${s[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${s[c.LONETILDE]}${s[c.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${s[c.LONETILDE]}${s[c.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${s[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${s[c.LONECARET]}${s[c.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${s[c.LONECARET]}${s[c.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${s[c.GTLT]}\\s*(${s[c.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${s[c.GTLT]}\\s*(${s[c.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${s[c.GTLT]}\\s*(${s[c.LOOSEPLAIN]}|${s[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${s[c.XRANGEPLAIN]})\\s+-\\s+(${s[c.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${s[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[c.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0.0.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),Qt=/^[0-9]+$/,yr=(e,t)=>{let r=Qt.test(e),o=Qt.test(t);return r&&o&&(e=+e,t=+t),e===t?0:r&&!o?-1:o&&!r?1:e<t?-1:1},Zn=(e,t)=>yr(t,e),eo={compareIdentifiers:yr,rcompareIdentifiers:Zn},{MAX_LENGTH:Zt,MAX_SAFE_INTEGER:Fe}=It,{re:er,t:tr}=ke,{compareIdentifiers:Me}=eo,re=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof re){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Zt)throw new TypeError(`version is longer than ${Zt} characters`);K("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?er[tr.LOOSE]:er[tr.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Fe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Fe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Fe||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let s=+o;if(s>=0&&s<Fe)return s}return o}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(K("SemVer.compare",this.version,this.options,e),!(e instanceof re)){if(typeof e=="string"&&e===this.version)return 0;e=new re(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof re||(e=new re(e,this.options)),Me(this.major,e.major)||Me(this.minor,e.minor)||Me(this.patch,e.patch)}comparePre(e){if(e instanceof re||(e=new re(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],o=e.prerelease[t];if(K("prerelease compare",t,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r!==o)return Me(r,o)}while(++t)}compareBuild(e){e instanceof re||(e=new re(e,this.options));let t=0;do{let r=this.build[t],o=e.build[t];if(K("prerelease compare",t,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r!==o)return Me(r,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},to=(e,t,r)=>new re(e,r).compare(new re(t,r)),$e=to,ro=(e,t,r)=>$e(e,t,r)===0,no=ro,oo=(e,t,r)=>$e(e,t,r)!==0,io=oo,ao=(e,t,r)=>$e(e,t,r)>0,so=ao,co=(e,t,r)=>$e(e,t,r)>=0,uo=co,lo=(e,t,r)=>$e(e,t,r)<0,fo=lo,ho=(e,t,r)=>$e(e,t,r)<=0,po=ho,vo=(e,t,r,o)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return no(e,r,o);case"!=":return io(e,r,o);case">":return so(e,r,o);case">=":return uo(e,r,o);case"<":return fo(e,r,o);case"<=":return po(e,r,o);default:throw new TypeError(`Invalid operator: ${t}`)}},pt=vo,Ce=Symbol("SemVer ANY"),je=class{static get ANY(){return Ce}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof je){if(e.loose===!!t.loose)return e;e=e.value}K("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Ce?this.value="":this.value=this.operator+this.semver.version,K("comp",this)}parse(e){let t=this.options.loose?rr[nr.COMPARATORLOOSE]:rr[nr.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new re(r[2],this.options.loose):this.semver=Ce}toString(){return this.value}test(e){if(K("Comparator.test",e,this.options.loose),this.semver===Ce||e===Ce)return!0;if(typeof e=="string")try{e=new re(e,this.options)}catch{return!1}return pt(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof je))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new Se(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new Se(this.value,t).test(e.semver);let r=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),o=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),s=this.semver.version===e.semver.version,c=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),E=pt(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),h=pt(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||o||s&&c||E||h}},{re:rr,t:nr}=ke,Se=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Se(e.raw,t);if(e instanceof je)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let r=t?ae[ne.HYPHENRANGELOOSE]:ae[ne.HYPHENRANGE];e=e.replace(r,No(this.options.includePrerelease)),K("hyphen replace",e),e=e.replace(ae[ne.COMPARATORTRIM],mo),K("comparator trim",e,ae[ne.COMPARATORTRIM]),e=(e=(e=e.replace(ae[ne.TILDETRIM],go)).replace(ae[ne.CARETTRIM],yo)).split(/\s+/).join(" ");let o=t?ae[ne.COMPARATORLOOSE]:ae[ne.COMPARATOR];return e.split(" ").map(s=>_o(s,this.options)).join(" ").split(/\s+/).map(s=>So(s,this.options)).filter(this.options.loose?s=>!!s.match(o):()=>!0).map(s=>new je(s,this.options))}intersects(e,t){if(!(e instanceof Se))throw new TypeError("a Range is required");return this.set.some(r=>or(r,t)&&e.set.some(o=>or(o,t)&&r.every(s=>o.every(c=>s.intersects(c,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new re(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if($o(this.set[t],e,this.options))return!0;return!1}},{re:ae,t:ne,comparatorTrimReplace:mo,tildeTrimReplace:go,caretTrimReplace:yo}=ke,or=(e,t)=>{let r=!0,o=e.slice(),s=o.pop();for(;r&&o.length;)r=o.every(c=>s.intersects(c,t)),s=o.pop();return r},_o=(e,t)=>(K("comp",e,t),e=bo(e,t),K("caret",e),e=Eo(e,t),K("tildes",e),e=Ro(e,t),K("xrange",e),e=Oo(e,t),K("stars",e),e),se=e=>!e||e.toLowerCase()==="x"||e==="*",Eo=(e,t)=>e.trim().split(/\s+/).map(r=>Io(r,t)).join(" "),Io=(e,t)=>{let r=t.loose?ae[ne.TILDELOOSE]:ae[ne.TILDE];return e.replace(r,(o,s,c,E,h)=>{let m;return K("tilde",e,o,s,c,E,h),se(s)?m="":se(c)?m=`>=${s}.0.0 <${+s+1}.0.0-0`:se(E)?m=`>=${s}.${c}.0 <${s}.${+c+1}.0-0`:h?(K("replaceTilde pr",h),m=`>=${s}.${c}.${E}-${h} <${s}.${+c+1}.0-0`):m=`>=${s}.${c}.${E} <${s}.${+c+1}.0-0`,K("tilde return",m),m})},bo=(e,t)=>e.trim().split(/\s+/).map(r=>wo(r,t)).join(" "),wo=(e,t)=>{K("caret",e,t);let r=t.loose?ae[ne.CARETLOOSE]:ae[ne.CARET],o=t.includePrerelease?"-0":"";return e.replace(r,(s,c,E,h,m)=>{let v;return K("caret",e,s,c,E,h,m),se(c)?v="":se(E)?v=`>=${c}.0.0${o} <${+c+1}.0.0-0`:se(h)?v=c==="0"?`>=${c}.${E}.0${o} <${c}.${+E+1}.0-0`:`>=${c}.${E}.0${o} <${+c+1}.0.0-0`:m?(K("replaceCaret pr",m),v=c==="0"?E==="0"?`>=${c}.${E}.${h}-${m} <${c}.${E}.${+h+1}-0`:`>=${c}.${E}.${h}-${m} <${c}.${+E+1}.0-0`:`>=${c}.${E}.${h}-${m} <${+c+1}.0.0-0`):(K("no pr"),v=c==="0"?E==="0"?`>=${c}.${E}.${h}${o} <${c}.${E}.${+h+1}-0`:`>=${c}.${E}.${h}${o} <${c}.${+E+1}.0-0`:`>=${c}.${E}.${h} <${+c+1}.0.0-0`),K("caret return",v),v})},Ro=(e,t)=>(K("replaceXRanges",e,t),e.split(/\s+/).map(r=>Ao(r,t)).join(" ")),Ao=(e,t)=>{e=e.trim();let r=t.loose?ae[ne.XRANGELOOSE]:ae[ne.XRANGE];return e.replace(r,(o,s,c,E,h,m)=>{K("xRange",e,o,s,c,E,h,m);let v=se(c),y=v||se(E),p=y||se(h),S=p;return s==="="&&S&&(s=""),m=t.includePrerelease?"-0":"",v?o=s===">"||s==="<"?"<0.0.0-0":"*":s&&S?(y&&(E=0),h=0,s===">"?(s=">=",y?(c=+c+1,E=0,h=0):(E=+E+1,h=0)):s==="<="&&(s="<",y?c=+c+1:E=+E+1),s==="<"&&(m="-0"),o=`${s+c}.${E}.${h}${m}`):y?o=`>=${c}.0.0${m} <${+c+1}.0.0-0`:p&&(o=`>=${c}.${E}.0${m} <${c}.${+E+1}.0-0`),K("xRange return",o),o})},Oo=(e,t)=>(K("replaceStars",e,t),e.trim().replace(ae[ne.STAR],"")),So=(e,t)=>(K("replaceGTE0",e,t),e.trim().replace(ae[t.includePrerelease?ne.GTE0PRE:ne.GTE0],"")),No=e=>(t,r,o,s,c,E,h,m,v,y,p,S,$)=>`${r=se(o)?"":se(s)?`>=${o}.0.0${e?"-0":""}`:se(c)?`>=${o}.${s}.0${e?"-0":""}`:E?`>=${r}`:`>=${r}${e?"-0":""}`} ${m=se(v)?"":se(y)?`<${+v+1}.0.0-0`:se(p)?`<${v}.${+y+1}.0-0`:S?`<=${v}.${y}.${p}-${S}`:e?`<${v}.${y}.${+p+1}-0`:`<=${m}`}`.trim(),$o=(e,t,r)=>{for(let o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let o=0;o<e.length;o++)if(K(e[o].semver),e[o].semver!==je.ANY&&e[o].semver.prerelease.length>0){let s=e[o].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0},Lo=(e,t,r)=>{try{t=new Se(t,r)}catch{return!1}return t.test(e)},{MAX_LENGTH:To}=It,{re:ir,t:ar}=ke,Mo=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof re)return e;if(typeof e!="string"||e.length>To||!(t.loose?ir[ar.LOOSE]:ir[ar.FULL]).test(e))return null;try{return new re(e,t)}catch{return null}},Co=Mo,{re:Ge,t:qe}=ke,Po=(e,t)=>{if(e instanceof re)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let r=null;if((t=t||{}).rtl){let o;for(;(o=Ge[qe.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&o.index+o[0].length===r.index+r[0].length||(r=o),Ge[qe.COERCERTL].lastIndex=o.index+o[1].length+o[2].length;Ge[qe.COERCERTL].lastIndex=-1}else r=e.match(Ge[qe.COERCE]);return r===null?null:Co(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function jo(e){return String.fromCharCode(parseInt(e.slice(1),16))}function Do(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function ko(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,jo))}function xo(e){return decodeURIComponent(Array.from(atob(e),Do).join(""))}function _r(e){return ko(JSON.stringify(e))}function Uo(e){return JSON.parse(xo(e))}function Pe(e){return typeof e>"u"}function Bo(e){return e===null}function Er(e){return Bo(e)||Pe(e)}function Fo(e){return Er(e)?!1:!Pe(e.jsonrpc)&&!Pe(e.id)&&(!Pe(e.result)||!Pe(e.error))}function Go(e){return Er(e)?!1:typeof e=="number"&&Object.values(Et).includes(e)}function yt(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var te={};function qo(e,t){return Object.assign(te,t),e}var Wo={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},Ee=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,Ee.prototype)}},Ye=class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=Go(t)?t:Et.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(e==null?void 0:e.data)||void 0,Object.setPrototypeOf(this,Ye.prototype)}},bt=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},Ir=class extends Error{constructor(e,t,r,o){super(`Magic Extension Error (${e.name}): [${t}] ${r}`),this.code=t,this.rawMessage=r,this.data=o,this.__proto__=Error,Object.setPrototypeOf(this,Ir.prototype)}},sr=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}log(){console.warn(this.message)}};function zo(){return new Ee(_e.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function Ho(){return new Ee(_e.ModalNotReady,"Modal is not ready.")}function Ko(){return new Ee(_e.MalformedResponse,"Response from the Magic iframe is malformed.")}function Xo(e){return new Ee(_e.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function Vo(e){let t=`Some extensions are incompatible with \`${te.sdkName}@${te.version}\`:`;return e.filter(r=>typeof r.compat<"u"&&r.compat!==null).forEach(r=>{let o=r.compat[te.sdkName];typeof o=="string"?t+=`
  - Extension \`${r.name}\` supports version(s) \`${o}\``:o||(t+=`
  - Extension \`${r.name}\` does not support ${te.platform} environments.`)}),new Ee(_e.IncompatibleExtensions,t)}function Yo(e){let t=r=>{let o=r+1,s=o%10,c=o%100;return s===1&&c!==11?`${o}st`:s===2&&c!==12?`${o}nd`:s===3&&c!==13?`${o}rd`:`${o}th`};return new Ee(_e.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function Jo(){return new bt(rt.DuplicateIframe,"Duplicate iframes found.")}function Qo(){return new bt(rt.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function Zo(){return new bt(rt.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${te.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function*ei(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var ti=ei();function br(){return ti.next().value}var wr=Symbol("Payload pre-processed by Magic SDK");function Rr(e){return Object.defineProperty(e,wr,{value:!0,enumerable:!1}),e}function ri(e){return!!e[wr]}function Je(e){var t,r,o;return ri(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=br(),e.method=(r=e.method)!=null?r:"noop",e.params=(o=e.params)!=null?o:[],Rr(e)),e}function Q(e,t=[]){return Rr({params:t,method:e,jsonrpc:"2.0",id:br()})}var wt=class{constructor(e){e instanceof wt?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):Fo(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},ni=Xn(Vn()),oi=class extends ni.default{};function Ar(){let e=new oi;return{emitter:e,createChainingEmitterMethod:(t,r)=>(...o)=>(e[t].apply(e,o),r),createBoundEmitterMethod:t=>(...r)=>e[t].apply(e,r)}}var Or=Symbol("isPromiEvent");function ii(e){return!!e[Or]}function Sr(e){let t=Nr(e),{createBoundEmitterMethod:r,createChainingEmitterMethod:o}=Ar(),s=Symbol("Promise.then"),c=Symbol("Promise.catch"),E=Symbol("Promise.finally"),h=(y,p)=>(...S)=>{let $=p[y].apply(p,S);return m($)},m=y=>Object.assign(y,{[Or]:!0,[s]:y[s]||y.then,[c]:y[c]||y.catch,[E]:y[E]||y.finally,then:h(s,y),catch:h(c,y),finally:h(E,y),on:o("on",y),once:o("once",y),addListener:o("addListener",y),off:o("off",y),removeListener:o("removeListener",y),removeAllListeners:o("removeAllListeners",y),emit:r("emit"),eventNames:r("eventNames"),listeners:r("listeners"),listenerCount:r("listenerCount")}),v=m(t.then(y=>(v.emit("done",y),v.emit("settled"),y),y=>{throw v.emit("error",y),v.emit("settled"),y}));return v}function Nr(e){return new Promise((t,r)=>{let o=e(t,r);Promise.resolve(o).catch(r)})}var Ie=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(Ve.MAGIC_HANDLE_REQUEST,Je(e)),r=Sr((s,c)=>{t.then(E=>{if(o(),E.hasError)c(new Ye(E.payload.error));else if(E.hasResult)s(E.payload.result);else throw Ko()}).catch(E=>{o(),c(E)})}),o=this.overlay.on(Oe.MAGIC_HANDLE_EVENT,s=>{var c;let{response:E}=s.data;if(E.id===e.id&&((c=E.result)==null?void 0:c.event)){let{event:h,params:m=[]}=E.result;r.emit(h,...m)}});return r}createIntermediaryEvent(e,t){return r=>{let o=Q(W.IntermediaryEvent,[{payloadId:t,eventType:e,args:r}]);this.request(o)}}},ai=class extends Ie{loginWithMagicLink(e){let{email:t,showUI:r=!0,redirectURI:o}=e,s=Q(this.sdk.testMode?W.LoginWithMagicLinkTestMode:W.LoginWithMagicLink,[{email:t,showUI:r,redirectURI:o}]);return this.request(s)}loginWithSMS(e){let{phoneNumber:t}=e,r=Q(this.sdk.testMode?W.LoginWithSmsTestMode:W.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(r)}loginWithEmailOTP(e){let{email:t,showUI:r}=e,o=Q(this.sdk.testMode?W.LoginWithEmailOTPTestMode:W.LoginWithEmailOTP,[{email:t,showUI:r}]);if(!r){let s=this.request(o);return s&&s.on("otp-input-sent",c=>{this.createIntermediaryEvent("verify-email-otp",o.id)(c)}),s}return this.request(o)}loginWithCredential(e){let t=e!=null?e:"";if(!e&&te.platform==="web"){t=window.location.search;let o=window.location.origin+window.location.pathname;window.history.replaceState(null,"",o)}let r=Q(this.sdk.testMode?W.LoginWithCredentialTestMode:W.LoginWithCredential,[t]);return this.request(r)}},$r={};Hn($r,{clear:()=>si,getItem:()=>De,iterate:()=>fi,key:()=>ui,keys:()=>li,length:()=>ci,removeItem:()=>_t,setItem:()=>Qe});var We;function me(e){return(...t)=>de(this,null,function*(){return We||(We=yield te.configureStorage()),yield We.ready(),We[e](...t)})}var De=me("getItem"),Qe=me("setItem"),_t=me("removeItem"),si=me("clear"),ci=me("length"),ui=me("key"),li=me("keys"),fi=me("iterate");function di(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var Rt="STORE_KEY_PRIVATE_KEY",Ze="STORE_KEY_PUBLIC_JWK",At="ECDSA",Lr="P-256",hi={name:At,namedCurve:Lr},pi={name:At,namedCurve:Lr};function Tr(){_t(Ze),_t(Rt)}function vi(){return de(this,null,function*(){let e=yield mi();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,r=yield De(Rt);if(!r||!t){console.info("unable to find private key or webcrypto unsupported");return}let o={iat:Math.floor(new Date().getTime()/1e3),jti:di()},s={typ:"dpop+jwt",alg:"ES256",jwk:e},c={protected:cr(JSON.stringify(s)),claims:cr(JSON.stringify(o))},E=_i(`${c.protected}.${c.claims}`),h={name:At,hash:{name:"SHA-256"}},m=Ii(new Uint8Array(yield t.sign(h,r,E)));return`${c.protected}.${c.claims}.${m}`})}function mi(){return de(this,null,function*(){if(!yi()){console.info("webcrypto is not supported");return}return(yield De(Ze))||(yield gi()),De(Ze)})}function gi(){return de(this,null,function*(){let e=null,{subtle:t}=window.crypto,r=yield t.generateKey(hi,!0,["sign"]),o=yield t.exportKey("jwk",r.privateKey);e=yield t.exportKey("jwk",r.publicKey);let s=yield t.importKey("jwk",o,pi,!1,["sign"]);yield Qe(Rt,s),yield Qe(Ze,e)})}function yi(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function cr(e){return Mr(Ei(e))}function _i(e){return new TextEncoder().encode(e)}function Mr(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function Ei(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}function Ii(e){let t="";return e.forEach(r=>{t+=String.fromCharCode(r)}),Mr(t)}var bi=class extends Ie{getIdToken(e){let t=Q(this.sdk.testMode?W.GetIdTokenTestMode:W.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=Q(this.sdk.testMode?W.GenerateIdTokenTestMode:W.GenerateIdToken,[e]);return this.request(t)}getMetadata(){let e=Q(this.sdk.testMode?W.GetMetadataTestMode:W.GetMetadata);return this.request(e)}updateEmail(e){let{email:t,showUI:r=!0}=e,o=Q(this.sdk.testMode?W.UpdateEmailTestMode:W.UpdateEmail,[{email:t,showUI:r}]);return this.request(o)}isLoggedIn(){let e=Q(this.sdk.testMode?W.IsLoggedInTestMode:W.IsLoggedIn);return this.request(e)}logout(){Tr();let e=Q(this.sdk.testMode?W.LogoutTestMode:W.Logout);return this.request(e)}showSettings(){let e=Q(this.sdk.testMode?W.UserSettingsTestMode:W.UserSettings);return this.request(e)}updatePhoneNumber(){let e=Q(this.sdk.testMode?W.UpdatePhoneNumberTestMode:W.UpdatePhoneNumber);return this.request(e)}recoverAccount(e){let t=Q(this.sdk.testMode?W.RecoverAccountTestMode:W.RecoverAccount,[e]);return this.request(t)}},wi=class extends Ie{connectWithUI(){let e=Q(W.RequestAccounts);return this.request(e)}showUI(){let e=Q(W.ShowUI);return this.request(e)}getInfo(){let e=Q(W.GetInfo);return this.request(e)}requestUserInfoWithUI(e){let t=Q(W.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}disconnect(){Tr();let e=Q(W.Disconnect);return this.request(e)}},{createBoundEmitterMethod:ze,createChainingEmitterMethod:Ae}=Ar(),Ri=class extends Ie{constructor(){super(...arguments),this.isMagic=!0,this.on=Ae("on",this),this.once=Ae("once",this),this.addListener=Ae("addListener",this),this.off=Ae("off",this),this.removeListener=Ae("removeListener",this),this.removeAllListeners=Ae("removeAllListeners",this),this.emit=ze("emit"),this.eventNames=ze("eventNames"),this.listeners=ze("listeners"),this.listenerCount=ze("listenerCount")}sendAsync(e,t){if(!t)throw Yo({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(Ve.MAGIC_HANDLE_REQUEST,e.map(r=>{let o=Je(r);return this.prefixPayloadMethodForTestMode(o),o})).then(r=>{t(null,r.map(o=>Wn(gr({},o.payload),{error:o.hasError?new Ye(o.payload.error):null})))});else{let r=Je(e);this.prefixPayloadMethodForTestMode(r),this.overlay.post(Ve.MAGIC_HANDLE_REQUEST,r).then(o=>{t(o.hasError?new Ye(o.payload.error):null,o.payload)})}}send(e,t){if(typeof e=="string"){let o=Q(e,Array.isArray(t)?t:[]);return this.request(o)}if(Array.isArray(e)||!!t){this.sendAsync(e,t);return}let r=Qo();return r.log(),new wt(e).applyError({code:-32603,message:r.rawMessage}).payload}enable(){let e=Q("eth_accounts");return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}};function et(e,t){return t?new URL(e,t):new URL(e)}var ur=["request","overlay","sdk"];function Ai(e){let t=Object.getPrototypeOf(e),r=[t];for(;t!==Ie.prototype;)t=Object.getPrototypeOf(t),r.push(t);return r}var Cr=class extends Ie{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:Sr,isPromiEvent:ii,encodeJSON:_r,decodeJSON:Uo,createJsonRpcRequestPayload:Q,standardizeJsonRpcRequestPayload:Je,storage:$r};let e=[this,...Ai(this)];ur.forEach(t=>{let r=e.map(E=>Object.getOwnPropertyDescriptor(E,t)),o=r.findIndex(E=>!!E),s=o>0,c=r[o];c&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:c,isPrototypeField:s}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw Xo(t)}}))})}init(e){this.__is_initialized__||(ur.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:r,isPrototypeField:o}=this.__sdk_access_field_descriptors__.get(t);o?delete this[t]:Object.defineProperty(this,t,r)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:r,useInstead:o}=e,s=o?` Use \`${o}\` instead.`:"",c=`\`${t}\` will be removed from this Extension in version \`${r}\`.${s}`;return new sr(this,"DEPRECATION_NOTICE",c)}createWarning(e,t){return new sr(this,e,t)}createError(e,t,r){return new Ir(this,e,t,r)}},Oi=class extends Cr{},Ne=class extends Cr{};Ne.Internal=Oi,Ne.Anonymous="anonymous extension";var Si=class extends Ie{purchase(e){let t=Q(W.NFTPurchase,[e]);return this.request(t)}};function lr(e){return e.compat&&e.compat[te.sdkName]!=null?typeof e.compat[te.sdkName]=="string"?Lo(Po(te.version),e.compat[te.sdkName]):!!e.compat[te.sdkName]:!0}function Ni(e){var t;let r=(t=e==null?void 0:e.extensions)!=null?t:[],o={},s=[];if(Array.isArray(r)?r.forEach(c=>{lr(c)?(c.init(this),(c.name||c.name!==Ne.Anonymous)&&(this[c.name]=c),c instanceof Ne.Internal&&(yt(c.config)||(o[c.name]=c.config))):s.push(c)}):Object.keys(r).forEach(c=>{if(lr(r[c])){r[c].init(this);let E=r[c];this[c]=E,E instanceof Ne.Internal&&(yt(E.config)||(o[r[c].name]=E.config))}else s.push(r[c])}),s.length)throw Vo(s);return o}var Ke=class{constructor(e,t){this.apiKey=e;var r;if(!e)throw zo();te.platform==="react-native"&&(t==null?void 0:t.endpoint)&&Zo().log();let{defaultEndpoint:o,version:s}=te;this.testMode=!!(t!=null&&t.testMode),this.endpoint=et((r=t==null?void 0:t.endpoint)!=null?r:o).origin,this.auth=new ai(this),this.user=new bi(this),this.wallet=new wi(this),this.nft=new Si(this),this.rpcProvider=new Ri(this);let c=Ni.call(this,t);this.parameters=_r(gr({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:et(this.endpoint).host,sdk:Wo[te.sdkName],version:s,ext:yt(c)?void 0:c,locale:(t==null?void 0:t.locale)||"en_US"},te.bundleId?{bundleId:te.bundleId}:{}))}get overlay(){if(!Ke.__overlays__.has(this.parameters)){let e=new te.ViewController(this.endpoint,this.parameters);e.init(),Ke.__overlays__.set(this.parameters,e)}return Ke.__overlays__.get(this.parameters)}preload(){return de(this,null,function*(){yield this.overlay.ready})}},Pr=Ke;Pr.__overlays__=new Map;function $i(e,t){return t&&Array.isArray(e)?e.find(r=>r.id===t):e}function Li(e,t){var r;let o=(r=t.data.response)==null?void 0:r.id,s=$i(e,o);if(o&&s){let c=new wt(s).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:o,response:c}}return{}}function Ti(e,t){return de(this,null,function*(){let r=yield De("rt"),o;if(te.platform==="web")try{o=yield vi()}catch(s){console.error("webcrypto error",s)}return o?r?{msgType:e,payload:t,jwt:o,rt:r}:{msgType:e,payload:t,jwt:o}:{msgType:e,payload:t}})}function Mi(e){return de(this,null,function*(){!e.data.rt||(yield Qe("rt",e.data.rt))})}var Ci=class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,t){return de(this,null,function*(){return Nr(r=>de(this,null,function*(){yield this.ready;let o=[],s=Array.isArray(t)?t.map(m=>m.id):[],c=yield Ti(`${e}-${this.parameters}`,t);yield this._post(c);let E=m=>v=>{let{id:y,response:p}=Li(t,v);Mi(v),y&&p&&Array.isArray(t)&&s.includes(y)?(o.push(p),o.length===t.length&&(m(),r(o))):y&&p&&!Array.isArray(t)&&y===t.id&&(m(),r(p))},h=this.on(Oe.MAGIC_HANDLE_RESPONSE,E(()=>h()))}))})}on(e,t){let r=t.bind(window),o=s=>{s.data.msgType===`${e}-${this.parameters}`&&r(s)};return this.messageHandlers.add(o),()=>this.messageHandlers.delete(o)}waitForReady(){return new Promise(e=>{this.on(Oe.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(Oe.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(Oe.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}},Pi=Object.create,jr=Object.defineProperty,ji=Object.getOwnPropertyDescriptor,Di=Object.getOwnPropertyNames,ki=Object.getPrototypeOf,xi=Object.prototype.hasOwnProperty,He=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),Dr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ui=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Di(t))!xi.call(e,s)&&s!==r&&jr(e,s,{get:()=>t[s],enumerable:!(o=ji(t,s))||o.enumerable});return e},kr=(e,t,r)=>(r=e!=null?Pi(ki(e)):{},Ui(t||!e||!e.__esModule?jr(r,"default",{value:e,enumerable:!0}):r,e)),Xe=(e,t,r)=>new Promise((o,s)=>{var c=m=>{try{h(r.next(m))}catch(v){s(v)}},E=m=>{try{h(r.throw(m))}catch(v){s(v)}},h=m=>m.done?o(m.value):Promise.resolve(m.value).then(c,E);h((r=r.apply(e,t)).next())}),Bi=Dr((e,t)=>{(function(r){if(typeof e=="object"&&typeof t<"u")t.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var o;typeof window<"u"?o=window:typeof Re<"u"?o=Re:typeof self<"u"?o=self:o=this,o.localforage=r()}})(function(){return function r(o,s,c){function E(v,y){if(!s[v]){if(!o[v]){var p=typeof He=="function"&&He;if(!y&&p)return p(v,!0);if(h)return h(v,!0);var S=new Error("Cannot find module '"+v+"'");throw S.code="MODULE_NOT_FOUND",S}var $=s[v]={exports:{}};o[v][0].call($.exports,function(P){var T=o[v][1][P];return E(T||P)},$,$.exports,r,o,s,c)}return s[v].exports}for(var h=typeof He=="function"&&He,m=0;m<c.length;m++)E(c[m]);return E}({1:[function(r,o,s){(function(c){var E=c.MutationObserver||c.WebKitMutationObserver,h;if(E){var m=0,v=new E(P),y=c.document.createTextNode("");v.observe(y,{characterData:!0}),h=function(){y.data=m=++m%2}}else if(!c.setImmediate&&typeof c.MessageChannel<"u"){var p=new c.MessageChannel;p.port1.onmessage=P,h=function(){p.port2.postMessage(0)}}else"document"in c&&"onreadystatechange"in c.document.createElement("script")?h=function(){var d=c.document.createElement("script");d.onreadystatechange=function(){P(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},c.document.documentElement.appendChild(d)}:h=function(){setTimeout(P,0)};var S,$=[];function P(){S=!0;for(var d,N,C=$.length;C;){for(N=$,$=[],d=-1;++d<C;)N[d]();C=$.length}S=!1}o.exports=T;function T(d){$.push(d)===1&&!S&&h()}}).call(this,typeof Re<"u"?Re:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,o,s){var c=r(1);function E(){}var h={},m=["REJECTED"],v=["FULFILLED"],y=["PENDING"];o.exports=p;function p(I){if(typeof I!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,I!==E&&T(this,I)}p.prototype.catch=function(I){return this.then(null,I)},p.prototype.then=function(I,B){if(typeof I!="function"&&this.state===v||typeof B!="function"&&this.state===m)return this;var D=new this.constructor(E);if(this.state!==y){var U=this.state===v?I:B;$(D,U,this.outcome)}else this.queue.push(new S(D,I,B));return D};function S(I,B,D){this.promise=I,typeof B=="function"&&(this.onFulfilled=B,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}S.prototype.callFulfilled=function(I){h.resolve(this.promise,I)},S.prototype.otherCallFulfilled=function(I){$(this.promise,this.onFulfilled,I)},S.prototype.callRejected=function(I){h.reject(this.promise,I)},S.prototype.otherCallRejected=function(I){$(this.promise,this.onRejected,I)};function $(I,B,D){c(function(){var U;try{U=B(D)}catch(z){return h.reject(I,z)}U===I?h.reject(I,new TypeError("Cannot resolve promise with itself")):h.resolve(I,U)})}h.resolve=function(I,B){var D=d(P,B);if(D.status==="error")return h.reject(I,D.value);var U=D.value;if(U)T(I,U);else{I.state=v,I.outcome=B;for(var z=-1,V=I.queue.length;++z<V;)I.queue[z].callFulfilled(B)}return I},h.reject=function(I,B){I.state=m,I.outcome=B;for(var D=-1,U=I.queue.length;++D<U;)I.queue[D].callRejected(B);return I};function P(I){var B=I&&I.then;if(I&&(typeof I=="object"||typeof I=="function")&&typeof B=="function")return function(){B.apply(I,arguments)}}function T(I,B){var D=!1;function U(oe){D||(D=!0,h.reject(I,oe))}function z(oe){D||(D=!0,h.resolve(I,oe))}function V(){B(z,U)}var Z=d(V);Z.status==="error"&&U(Z.value)}function d(I,B){var D={};try{D.value=I(B),D.status="success"}catch(U){D.status="error",D.value=U}return D}p.resolve=N;function N(I){return I instanceof this?I:h.resolve(new this(E),I)}p.reject=C;function C(I){var B=new this(E);return h.reject(B,I)}p.all=M;function M(I){var B=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=I.length,U=!1;if(!D)return this.resolve([]);for(var z=new Array(D),V=0,Z=-1,oe=new this(E);++Z<D;)ce(I[Z],Z);return oe;function ce(fe,he){B.resolve(fe).then(ge,function(le){U||(U=!0,h.reject(oe,le))});function ge(le){z[he]=le,++V===D&&!U&&(U=!0,h.resolve(oe,z))}}}p.race=F;function F(I){var B=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=I.length,U=!1;if(!D)return this.resolve([]);for(var z=-1,V=new this(E);++z<D;)Z(I[z]);return V;function Z(oe){B.resolve(oe).then(function(ce){U||(U=!0,h.resolve(V,ce))},function(ce){U||(U=!0,h.reject(V,ce))})}}},{1:1}],3:[function(r,o,s){(function(c){typeof c.Promise!="function"&&(c.Promise=r(2))}).call(this,typeof Re<"u"?Re:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,o,s){var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function E(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function h(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var m=h();function v(){try{if(!m||!m.open)return!1;var n=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),i=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!n||i)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function y(n,i){n=n||[],i=i||{};try{return new Blob(n,i)}catch(f){if(f.name!=="TypeError")throw f;for(var a=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,l=new a,u=0;u<n.length;u+=1)l.append(n[u]);return l.getBlob(i.type)}}typeof Promise>"u"&&r(3);var p=Promise;function S(n,i){i&&n.then(function(a){i(null,a)},function(a){i(a)})}function $(n,i,a){typeof i=="function"&&n.then(i),typeof a=="function"&&n.catch(a)}function P(n){return typeof n!="string"&&(console.warn(n+" used as a key, but it is not a string."),n=String(n)),n}function T(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",N=void 0,C={},M=Object.prototype.toString,F="readonly",I="readwrite";function B(n){for(var i=n.length,a=new ArrayBuffer(i),l=new Uint8Array(a),u=0;u<i;u++)l[u]=n.charCodeAt(u);return a}function D(n){return new p(function(i){var a=n.transaction(d,I),l=y([""]);a.objectStore(d).put(l,"key"),a.onabort=function(u){u.preventDefault(),u.stopPropagation(),i(!1)},a.oncomplete=function(){var u=navigator.userAgent.match(/Chrome\/(\d+)/),f=navigator.userAgent.match(/Edge\//);i(f||!u||parseInt(u[1],10)>=43)}}).catch(function(){return!1})}function U(n){return typeof N=="boolean"?p.resolve(N):D(n).then(function(i){return N=i,N})}function z(n){var i=C[n.name],a={};a.promise=new p(function(l,u){a.resolve=l,a.reject=u}),i.deferredOperations.push(a),i.dbReady?i.dbReady=i.dbReady.then(function(){return a.promise}):i.dbReady=a.promise}function V(n){var i=C[n.name],a=i.deferredOperations.pop();if(a)return a.resolve(),a.promise}function Z(n,i){var a=C[n.name],l=a.deferredOperations.pop();if(l)return l.reject(i),l.promise}function oe(n,i){return new p(function(a,l){if(C[n.name]=C[n.name]||x(),n.db)if(i)z(n),n.db.close();else return a(n.db);var u=[n.name];i&&u.push(n.version);var f=m.open.apply(m,u);i&&(f.onupgradeneeded=function(_){var b=f.result;try{b.createObjectStore(n.storeName),_.oldVersion<=1&&b.createObjectStore(d)}catch(O){if(O.name==="ConstraintError")console.warn('The database "'+n.name+'" has been upgraded from version '+_.oldVersion+" to version "+_.newVersion+', but the storage "'+n.storeName+'" already exists.');else throw O}}),f.onerror=function(_){_.preventDefault(),l(f.error)},f.onsuccess=function(){var _=f.result;_.onversionchange=function(b){b.target.close()},a(_),V(n)}})}function ce(n){return oe(n,!1)}function fe(n){return oe(n,!0)}function he(n,i){if(!n.db)return!0;var a=!n.db.objectStoreNames.contains(n.storeName),l=n.version<n.db.version,u=n.version>n.db.version;if(l&&(n.version!==i&&console.warn('The database "'+n.name+`" can't be downgraded from version `+n.db.version+" to version "+n.version+"."),n.version=n.db.version),u||a){if(a){var f=n.db.version+1;f>n.version&&(n.version=f)}return!0}return!1}function ge(n){return new p(function(i,a){var l=new FileReader;l.onerror=a,l.onloadend=function(u){var f=btoa(u.target.result||"");i({__local_forage_encoded_blob:!0,data:f,type:n.type})},l.readAsBinaryString(n)})}function le(n){var i=B(atob(n.data));return y([i],{type:n.type})}function g(n){return n&&n.__local_forage_encoded_blob}function w(n){var i=this,a=i._initReady().then(function(){var l=C[i._dbInfo.name];if(l&&l.dbReady)return l.dbReady});return $(a,n,n),a}function L(n){z(n);for(var i=C[n.name],a=i.forages,l=0;l<a.length;l++){var u=a[l];u._dbInfo.db&&(u._dbInfo.db.close(),u._dbInfo.db=null)}return n.db=null,ce(n).then(function(f){return n.db=f,he(n)?fe(n):f}).then(function(f){n.db=i.db=f;for(var _=0;_<a.length;_++)a[_]._dbInfo.db=f}).catch(function(f){throw Z(n,f),f})}function j(n,i,a,l){l===void 0&&(l=1);try{var u=n.db.transaction(n.storeName,i);a(null,u)}catch(f){if(l>0&&(!n.db||f.name==="InvalidStateError"||f.name==="NotFoundError"))return p.resolve().then(function(){if(!n.db||f.name==="NotFoundError"&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version)return n.db&&(n.version=n.db.version+1),fe(n)}).then(function(){return L(n).then(function(){j(n,i,a,l-1)})}).catch(a);a(f)}}function x(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function G(n){var i=this,a={db:null};if(n)for(var l in n)a[l]=n[l];var u=C[a.name];u||(u=x(),C[a.name]=u),u.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=w);var f=[];function _(){return p.resolve()}for(var b=0;b<u.forages.length;b++){var O=u.forages[b];O!==i&&f.push(O._initReady().catch(_))}var A=u.forages.slice(0);return p.all(f).then(function(){return a.db=u.db,ce(a)}).then(function(R){return a.db=R,he(a,i._defaultConfig.version)?fe(a):R}).then(function(R){a.db=u.db=R,i._dbInfo=a;for(var k=0;k<A.length;k++){var q=A[k];q!==i&&(q._dbInfo.db=a.db,q._dbInfo.version=a.version)}})}function Y(n,i){var a=this;n=P(n);var l=new p(function(u,f){a.ready().then(function(){j(a._dbInfo,F,function(_,b){if(_)return f(_);try{var O=b.objectStore(a._dbInfo.storeName),A=O.get(n);A.onsuccess=function(){var R=A.result;R===void 0&&(R=null),g(R)&&(R=le(R)),u(R)},A.onerror=function(){f(A.error)}}catch(R){f(R)}})}).catch(f)});return S(l,i),l}function ie(n,i){var a=this,l=new p(function(u,f){a.ready().then(function(){j(a._dbInfo,F,function(_,b){if(_)return f(_);try{var O=b.objectStore(a._dbInfo.storeName),A=O.openCursor(),R=1;A.onsuccess=function(){var k=A.result;if(k){var q=k.value;g(q)&&(q=le(q));var X=n(q,k.key,R++);X!==void 0?u(X):k.continue()}else u()},A.onerror=function(){f(A.error)}}catch(k){f(k)}})}).catch(f)});return S(l,i),l}function be(n,i,a){var l=this;n=P(n);var u=new p(function(f,_){var b;l.ready().then(function(){return b=l._dbInfo,M.call(i)==="[object Blob]"?U(b.db).then(function(O){return O?i:ge(i)}):i}).then(function(O){j(l._dbInfo,I,function(A,R){if(A)return _(A);try{var k=R.objectStore(l._dbInfo.storeName);O===null&&(O=void 0);var q=k.put(O,n);R.oncomplete=function(){O===void 0&&(O=null),f(O)},R.onabort=R.onerror=function(){var X=q.error?q.error:q.transaction.error;_(X)}}catch(X){_(X)}})}).catch(_)});return S(u,a),u}function ye(n,i){var a=this;n=P(n);var l=new p(function(u,f){a.ready().then(function(){j(a._dbInfo,I,function(_,b){if(_)return f(_);try{var O=b.objectStore(a._dbInfo.storeName),A=O.delete(n);b.oncomplete=function(){u()},b.onerror=function(){f(A.error)},b.onabort=function(){var R=A.error?A.error:A.transaction.error;f(R)}}catch(R){f(R)}})}).catch(f)});return S(l,i),l}function Le(n){var i=this,a=new p(function(l,u){i.ready().then(function(){j(i._dbInfo,I,function(f,_){if(f)return u(f);try{var b=_.objectStore(i._dbInfo.storeName),O=b.clear();_.oncomplete=function(){l()},_.onabort=_.onerror=function(){var A=O.error?O.error:O.transaction.error;u(A)}}catch(A){u(A)}})}).catch(u)});return S(a,n),a}function Gr(n){var i=this,a=new p(function(l,u){i.ready().then(function(){j(i._dbInfo,F,function(f,_){if(f)return u(f);try{var b=_.objectStore(i._dbInfo.storeName),O=b.count();O.onsuccess=function(){l(O.result)},O.onerror=function(){u(O.error)}}catch(A){u(A)}})}).catch(u)});return S(a,n),a}function qr(n,i){var a=this,l=new p(function(u,f){if(n<0){u(null);return}a.ready().then(function(){j(a._dbInfo,F,function(_,b){if(_)return f(_);try{var O=b.objectStore(a._dbInfo.storeName),A=!1,R=O.openKeyCursor();R.onsuccess=function(){var k=R.result;if(!k){u(null);return}n===0||A?u(k.key):(A=!0,k.advance(n))},R.onerror=function(){f(R.error)}}catch(k){f(k)}})}).catch(f)});return S(l,i),l}function Wr(n){var i=this,a=new p(function(l,u){i.ready().then(function(){j(i._dbInfo,F,function(f,_){if(f)return u(f);try{var b=_.objectStore(i._dbInfo.storeName),O=b.openKeyCursor(),A=[];O.onsuccess=function(){var R=O.result;if(!R){l(A);return}A.push(R.key),R.continue()},O.onerror=function(){u(O.error)}}catch(R){u(R)}})}).catch(u)});return S(a,n),a}function zr(n,i){i=T.apply(this,arguments);var a=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||a.name,n.storeName=n.storeName||a.storeName);var l=this,u;if(!n.name)u=p.reject("Invalid arguments");else{var f=n.name===a.name&&l._dbInfo.db,_=f?p.resolve(l._dbInfo.db):ce(n).then(function(b){var O=C[n.name],A=O.forages;O.db=b;for(var R=0;R<A.length;R++)A[R]._dbInfo.db=b;return b});n.storeName?u=_.then(function(b){if(b.objectStoreNames.contains(n.storeName)){var O=b.version+1;z(n);var A=C[n.name],R=A.forages;b.close();for(var k=0;k<R.length;k++){var q=R[k];q._dbInfo.db=null,q._dbInfo.version=O}var X=new p(function(H,ee){var J=m.open(n.name,O);J.onerror=function(ue){var ft=J.result;ft.close(),ee(ue)},J.onupgradeneeded=function(){var ue=J.result;ue.deleteObjectStore(n.storeName)},J.onsuccess=function(){var ue=J.result;ue.close(),H(ue)}});return X.then(function(H){A.db=H;for(var ee=0;ee<R.length;ee++){var J=R[ee];J._dbInfo.db=H,V(J._dbInfo)}}).catch(function(H){throw(Z(n,H)||p.resolve()).catch(function(){}),H})}}):u=_.then(function(b){z(n);var O=C[n.name],A=O.forages;b.close();for(var R=0;R<A.length;R++){var k=A[R];k._dbInfo.db=null}var q=new p(function(X,H){var ee=m.deleteDatabase(n.name);ee.onerror=function(){var J=ee.result;J&&J.close(),H(ee.error)},ee.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},ee.onsuccess=function(){var J=ee.result;J&&J.close(),X(J)}});return q.then(function(X){O.db=X;for(var H=0;H<A.length;H++){var ee=A[H];V(ee._dbInfo)}}).catch(function(X){throw(Z(n,X)||p.resolve()).catch(function(){}),X})})}return S(u,i),u}var Hr={_driver:"asyncStorage",_initStorage:G,_support:v(),iterate:ie,getItem:Y,setItem:be,removeItem:ye,clear:Le,length:Gr,key:qr,keys:Wr,dropInstance:zr};function Kr(){return typeof openDatabase=="function"}var pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xr="~~local_forage_type~",St=/^~~local_forage_type~([^~]+)~/,Ue="__lfsc__:",ot=Ue.length,it="arbf",at="blob",Nt="si08",$t="ui08",Lt="uic8",Tt="si16",Mt="si32",Ct="ur16",Pt="ui32",jt="fl32",Dt="fl64",kt=ot+it.length,xt=Object.prototype.toString;function Ut(n){var i=n.length*.75,a=n.length,l,u=0,f,_,b,O;n[n.length-1]==="="&&(i--,n[n.length-2]==="="&&i--);var A=new ArrayBuffer(i),R=new Uint8Array(A);for(l=0;l<a;l+=4)f=pe.indexOf(n[l]),_=pe.indexOf(n[l+1]),b=pe.indexOf(n[l+2]),O=pe.indexOf(n[l+3]),R[u++]=f<<2|_>>4,R[u++]=(_&15)<<4|b>>2,R[u++]=(b&3)<<6|O&63;return A}function st(n){var i=new Uint8Array(n),a="",l;for(l=0;l<i.length;l+=3)a+=pe[i[l]>>2],a+=pe[(i[l]&3)<<4|i[l+1]>>4],a+=pe[(i[l+1]&15)<<2|i[l+2]>>6],a+=pe[i[l+2]&63];return i.length%3===2?a=a.substring(0,a.length-1)+"=":i.length%3===1&&(a=a.substring(0,a.length-2)+"=="),a}function Vr(n,i){var a="";if(n&&(a=xt.call(n)),n&&(a==="[object ArrayBuffer]"||n.buffer&&xt.call(n.buffer)==="[object ArrayBuffer]")){var l,u=Ue;n instanceof ArrayBuffer?(l=n,u+=it):(l=n.buffer,a==="[object Int8Array]"?u+=Nt:a==="[object Uint8Array]"?u+=$t:a==="[object Uint8ClampedArray]"?u+=Lt:a==="[object Int16Array]"?u+=Tt:a==="[object Uint16Array]"?u+=Ct:a==="[object Int32Array]"?u+=Mt:a==="[object Uint32Array]"?u+=Pt:a==="[object Float32Array]"?u+=jt:a==="[object Float64Array]"?u+=Dt:i(new Error("Failed to get type for BinaryArray"))),i(u+st(l))}else if(a==="[object Blob]"){var f=new FileReader;f.onload=function(){var _=Xr+n.type+"~"+st(this.result);i(Ue+at+_)},f.readAsArrayBuffer(n)}else try{i(JSON.stringify(n))}catch(_){console.error("Couldn't convert value into a JSON string: ",n),i(null,_)}}function Yr(n){if(n.substring(0,ot)!==Ue)return JSON.parse(n);var i=n.substring(kt),a=n.substring(ot,kt),l;if(a===at&&St.test(i)){var u=i.match(St);l=u[1],i=i.substring(u[0].length)}var f=Ut(i);switch(a){case it:return f;case at:return y([f],{type:l});case Nt:return new Int8Array(f);case $t:return new Uint8Array(f);case Lt:return new Uint8ClampedArray(f);case Tt:return new Int16Array(f);case Ct:return new Uint16Array(f);case Mt:return new Int32Array(f);case Pt:return new Uint32Array(f);case jt:return new Float32Array(f);case Dt:return new Float64Array(f);default:throw new Error("Unkown type: "+a)}}var ct={serialize:Vr,deserialize:Yr,stringToBuffer:Ut,bufferToString:st};function Bt(n,i,a,l){n.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],a,l)}function Jr(n){var i=this,a={db:null};if(n)for(var l in n)a[l]=typeof n[l]!="string"?n[l].toString():n[l];var u=new p(function(f,_){try{a.db=openDatabase(a.name,String(a.version),a.description,a.size)}catch(b){return _(b)}a.db.transaction(function(b){Bt(b,a,function(){i._dbInfo=a,f()},function(O,A){_(A)})},_)});return a.serializer=ct,u}function ve(n,i,a,l,u,f){n.executeSql(a,l,u,function(_,b){b.code===b.SYNTAX_ERR?_.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[i.storeName],function(O,A){A.rows.length?f(O,b):Bt(O,i,function(){O.executeSql(a,l,u,f)},f)},f):f(_,b)},f)}function Qr(n,i){var a=this;n=P(n);var l=new p(function(u,f){a.ready().then(function(){var _=a._dbInfo;_.db.transaction(function(b){ve(b,_,"SELECT * FROM "+_.storeName+" WHERE key = ? LIMIT 1",[n],function(O,A){var R=A.rows.length?A.rows.item(0).value:null;R&&(R=_.serializer.deserialize(R)),u(R)},function(O,A){f(A)})})}).catch(f)});return S(l,i),l}function Zr(n,i){var a=this,l=new p(function(u,f){a.ready().then(function(){var _=a._dbInfo;_.db.transaction(function(b){ve(b,_,"SELECT * FROM "+_.storeName,[],function(O,A){for(var R=A.rows,k=R.length,q=0;q<k;q++){var X=R.item(q),H=X.value;if(H&&(H=_.serializer.deserialize(H)),H=n(H,X.key,q+1),H!==void 0){u(H);return}}u()},function(O,A){f(A)})})}).catch(f)});return S(l,i),l}function Ft(n,i,a,l){var u=this;n=P(n);var f=new p(function(_,b){u.ready().then(function(){i===void 0&&(i=null);var O=i,A=u._dbInfo;A.serializer.serialize(i,function(R,k){k?b(k):A.db.transaction(function(q){ve(q,A,"INSERT OR REPLACE INTO "+A.storeName+" (key, value) VALUES (?, ?)",[n,R],function(){_(O)},function(X,H){b(H)})},function(q){if(q.code===q.QUOTA_ERR){if(l>0){_(Ft.apply(u,[n,O,a,l-1]));return}b(q)}})})}).catch(b)});return S(f,a),f}function en(n,i,a){return Ft.apply(this,[n,i,a,1])}function tn(n,i){var a=this;n=P(n);var l=new p(function(u,f){a.ready().then(function(){var _=a._dbInfo;_.db.transaction(function(b){ve(b,_,"DELETE FROM "+_.storeName+" WHERE key = ?",[n],function(){u()},function(O,A){f(A)})})}).catch(f)});return S(l,i),l}function rn(n){var i=this,a=new p(function(l,u){i.ready().then(function(){var f=i._dbInfo;f.db.transaction(function(_){ve(_,f,"DELETE FROM "+f.storeName,[],function(){l()},function(b,O){u(O)})})}).catch(u)});return S(a,n),a}function nn(n){var i=this,a=new p(function(l,u){i.ready().then(function(){var f=i._dbInfo;f.db.transaction(function(_){ve(_,f,"SELECT COUNT(key) as c FROM "+f.storeName,[],function(b,O){var A=O.rows.item(0).c;l(A)},function(b,O){u(O)})})}).catch(u)});return S(a,n),a}function on(n,i){var a=this,l=new p(function(u,f){a.ready().then(function(){var _=a._dbInfo;_.db.transaction(function(b){ve(b,_,"SELECT key FROM "+_.storeName+" WHERE id = ? LIMIT 1",[n+1],function(O,A){var R=A.rows.length?A.rows.item(0).key:null;u(R)},function(O,A){f(A)})})}).catch(f)});return S(l,i),l}function an(n){var i=this,a=new p(function(l,u){i.ready().then(function(){var f=i._dbInfo;f.db.transaction(function(_){ve(_,f,"SELECT key FROM "+f.storeName,[],function(b,O){for(var A=[],R=0;R<O.rows.length;R++)A.push(O.rows.item(R).key);l(A)},function(b,O){u(O)})})}).catch(u)});return S(a,n),a}function sn(n){return new p(function(i,a){n.transaction(function(l){l.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(u,f){for(var _=[],b=0;b<f.rows.length;b++)_.push(f.rows.item(b).name);i({db:n,storeNames:_})},function(u,f){a(f)})},function(l){a(l)})})}function cn(n,i){i=T.apply(this,arguments);var a=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||a.name,n.storeName=n.storeName||a.storeName);var l=this,u;return n.name?u=new p(function(f){var _;n.name===a.name?_=l._dbInfo.db:_=openDatabase(n.name,"","",0),n.storeName?f({db:_,storeNames:[n.storeName]}):f(sn(_))}).then(function(f){return new p(function(_,b){f.db.transaction(function(O){function A(X){return new p(function(H,ee){O.executeSql("DROP TABLE IF EXISTS "+X,[],function(){H()},function(J,ue){ee(ue)})})}for(var R=[],k=0,q=f.storeNames.length;k<q;k++)R.push(A(f.storeNames[k]));p.all(R).then(function(){_()}).catch(function(X){b(X)})},function(O){b(O)})})}):u=p.reject("Invalid arguments"),S(u,i),u}var un={_driver:"webSQLStorage",_initStorage:Jr,_support:Kr(),iterate:Zr,getItem:Qr,setItem:en,removeItem:tn,clear:rn,length:nn,key:on,keys:an,dropInstance:cn};function ln(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Gt(n,i){var a=n.name+"/";return n.storeName!==i.storeName&&(a+=n.storeName+"/"),a}function fn(){var n="_localforage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch{return!0}}function dn(){return!fn()||localStorage.length>0}function hn(n){var i=this,a={};if(n)for(var l in n)a[l]=n[l];return a.keyPrefix=Gt(n,i._defaultConfig),dn()?(i._dbInfo=a,a.serializer=ct,p.resolve()):p.reject()}function pn(n){var i=this,a=i.ready().then(function(){for(var l=i._dbInfo.keyPrefix,u=localStorage.length-1;u>=0;u--){var f=localStorage.key(u);f.indexOf(l)===0&&localStorage.removeItem(f)}});return S(a,n),a}function vn(n,i){var a=this;n=P(n);var l=a.ready().then(function(){var u=a._dbInfo,f=localStorage.getItem(u.keyPrefix+n);return f&&(f=u.serializer.deserialize(f)),f});return S(l,i),l}function mn(n,i){var a=this,l=a.ready().then(function(){for(var u=a._dbInfo,f=u.keyPrefix,_=f.length,b=localStorage.length,O=1,A=0;A<b;A++){var R=localStorage.key(A);if(R.indexOf(f)===0){var k=localStorage.getItem(R);if(k&&(k=u.serializer.deserialize(k)),k=n(k,R.substring(_),O++),k!==void 0)return k}}});return S(l,i),l}function gn(n,i){var a=this,l=a.ready().then(function(){var u=a._dbInfo,f;try{f=localStorage.key(n)}catch{f=null}return f&&(f=f.substring(u.keyPrefix.length)),f});return S(l,i),l}function yn(n){var i=this,a=i.ready().then(function(){for(var l=i._dbInfo,u=localStorage.length,f=[],_=0;_<u;_++){var b=localStorage.key(_);b.indexOf(l.keyPrefix)===0&&f.push(b.substring(l.keyPrefix.length))}return f});return S(a,n),a}function _n(n){var i=this,a=i.keys().then(function(l){return l.length});return S(a,n),a}function En(n,i){var a=this;n=P(n);var l=a.ready().then(function(){var u=a._dbInfo;localStorage.removeItem(u.keyPrefix+n)});return S(l,i),l}function In(n,i,a){var l=this;n=P(n);var u=l.ready().then(function(){i===void 0&&(i=null);var f=i;return new p(function(_,b){var O=l._dbInfo;O.serializer.serialize(i,function(A,R){if(R)b(R);else try{localStorage.setItem(O.keyPrefix+n,A),_(f)}catch(k){(k.name==="QuotaExceededError"||k.name==="NS_ERROR_DOM_QUOTA_REACHED")&&b(k),b(k)}})})});return S(u,a),u}function bn(n,i){if(i=T.apply(this,arguments),n=typeof n!="function"&&n||{},!n.name){var a=this.config();n.name=n.name||a.name,n.storeName=n.storeName||a.storeName}var l=this,u;return n.name?u=new p(function(f){n.storeName?f(Gt(n,l._defaultConfig)):f(n.name+"/")}).then(function(f){for(var _=localStorage.length-1;_>=0;_--){var b=localStorage.key(_);b.indexOf(f)===0&&localStorage.removeItem(b)}}):u=p.reject("Invalid arguments"),S(u,i),u}var wn={_driver:"localStorageWrapper",_initStorage:hn,_support:ln(),iterate:mn,getItem:vn,setItem:In,removeItem:En,clear:pn,length:_n,key:gn,keys:yn,dropInstance:bn},Rn=function(n,i){return n===i||typeof n=="number"&&typeof i=="number"&&isNaN(n)&&isNaN(i)},An=function(n,i){for(var a=n.length,l=0;l<a;){if(Rn(n[l],i))return!0;l++}return!1},qt=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},Te={},Wt={},we={INDEXEDDB:Hr,WEBSQL:un,LOCALSTORAGE:wn},On=[we.INDEXEDDB._driver,we.WEBSQL._driver,we.LOCALSTORAGE._driver],Be=["dropInstance"],ut=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Be),Sn={description:"",driver:On.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Nn(n,i){n[i]=function(){var a=arguments;return n.ready().then(function(){return n[i].apply(n,a)})}}function lt(){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var a in i)i.hasOwnProperty(a)&&(qt(i[a])?arguments[0][a]=i[a].slice():arguments[0][a]=i[a])}return arguments[0]}var $n=function(){function n(i){E(this,n);for(var a in we)if(we.hasOwnProperty(a)){var l=we[a],u=l._driver;this[a]=u,Te[u]||this.defineDriver(l)}this._defaultConfig=lt({},Sn),this._config=lt({},this._defaultConfig,i),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return n.prototype.config=function(i){if((typeof i>"u"?"undefined":c(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in i){if(a==="storeName"&&(i[a]=i[a].replace(/\W/g,"_")),a==="version"&&typeof i[a]!="number")return new Error("Database version must be a number.");this._config[a]=i[a]}return"driver"in i&&i.driver?this.setDriver(this._config.driver):!0}else return typeof i=="string"?this._config[i]:this._config},n.prototype.defineDriver=function(i,a,l){var u=new p(function(f,_){try{var b=i._driver,O=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver){_(O);return}for(var A=ut.concat("_initStorage"),R=0,k=A.length;R<k;R++){var q=A[R],X=!An(Be,q);if((X||i[q])&&typeof i[q]!="function"){_(O);return}}var H=function(){for(var J=function(Tn){return function(){var Mn=new Error("Method "+Tn+" is not implemented by the current driver"),zt=p.reject(Mn);return S(zt,arguments[arguments.length-1]),zt}},ue=0,ft=Be.length;ue<ft;ue++){var dt=Be[ue];i[dt]||(i[dt]=J(dt))}};H();var ee=function(J){Te[b]&&console.info("Redefining LocalForage driver: "+b),Te[b]=i,Wt[b]=J,f()};"_support"in i?i._support&&typeof i._support=="function"?i._support().then(ee,_):ee(!!i._support):ee(!0)}catch(J){_(J)}});return $(u,a,l),u},n.prototype.driver=function(){return this._driver||null},n.prototype.getDriver=function(i,a,l){var u=Te[i]?p.resolve(Te[i]):p.reject(new Error("Driver not found."));return $(u,a,l),u},n.prototype.getSerializer=function(i){var a=p.resolve(ct);return $(a,i),a},n.prototype.ready=function(i){var a=this,l=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return $(l,i,i),l},n.prototype.setDriver=function(i,a,l){var u=this;qt(i)||(i=[i]);var f=this._getSupportedDrivers(i);function _(){u._config.driver=u.driver()}function b(R){return u._extend(R),_(),u._ready=u._initStorage(u._config),u._ready}function O(R){return function(){var k=0;function q(){for(;k<R.length;){var X=R[k];return k++,u._dbInfo=null,u._ready=null,u.getDriver(X).then(b).catch(q)}_();var H=new Error("No available storage method found.");return u._driverSet=p.reject(H),u._driverSet}return q()}}var A=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=A.then(function(){var R=f[0];return u._dbInfo=null,u._ready=null,u.getDriver(R).then(function(k){u._driver=k._driver,_(),u._wrapLibraryMethodsWithReady(),u._initDriver=O(f)})}).catch(function(){_();var R=new Error("No available storage method found.");return u._driverSet=p.reject(R),u._driverSet}),$(this._driverSet,a,l),this._driverSet},n.prototype.supports=function(i){return!!Wt[i]},n.prototype._extend=function(i){lt(this,i)},n.prototype._getSupportedDrivers=function(i){for(var a=[],l=0,u=i.length;l<u;l++){var f=i[l];this.supports(f)&&a.push(f)}return a},n.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,a=ut.length;i<a;i++)Nn(this,ut[i])},n.prototype.createInstance=function(i){return new n(i)},n}(),Ln=new $n;o.exports=Ln},{3:3}]},{},[4])(4)})}),Fi=Dr((e,t)=>{(function(r,o){typeof e=="object"&&typeof t<"u"?o(e):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],o):o(r.LocalforageDriverMemory={})})(typeof self<"u"?self:e,function(r){var o="localforage-driver-memory";function s(g){var w=typeof Symbol=="function"&&g[Symbol.iterator],L=0;return w?w.call(g):{next:function(){return g&&L>=g.length&&(g=void 0),{value:g&&g[L++],done:!g}}}}function c(g,w){g=g||[],w=w||{};try{return new Blob(g,w)}catch(G){if(G.name!=="TypeError")throw G;for(var L=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,j=new L,x=0;x<g.length;x+=1)j.append(g[x]);return j.getBlob(w.type)}}var E=/^~~local_forage_type~([^~]+)~/,h=9,m=h+4,v=Object.prototype.toString;function y(g){var w=g.length*.75,L=g.length;g[g.length-1]==="="&&(w--,g[g.length-2]==="="&&w--);for(var j=new ArrayBuffer(w),x=new Uint8Array(j),G=0,Y=0;G<L;G+=4){var ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(g[G]),be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(g[G+1]),ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(g[G+2]),Le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(g[G+3]);x[Y++]=ie<<2|be>>4,x[Y++]=(be&15)<<4|ye>>2,x[Y++]=(ye&3)<<6|Le&63}return j}function p(g){for(var w=new Uint8Array(g),L="",j=0;j<w.length;j+=3)L+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[w[j]>>2],L+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(w[j]&3)<<4|w[j+1]>>4],L+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(w[j+1]&15)<<2|w[j+2]>>6],L+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[w[j+2]&63];return w.length%3===2?L=L.substring(0,L.length-1)+"=":w.length%3===1&&(L=L.substring(0,L.length-2)+"=="),L}function S(g,w){var L="";if(g&&(L=v.call(g)),g&&(L==="[object ArrayBuffer]"||g.buffer&&v.call(g.buffer)==="[object ArrayBuffer]")){var j=void 0,x="__lfsc__:";g instanceof ArrayBuffer?(j=g,x+="arbf"):(j=g.buffer,L==="[object Int8Array]"?x+="si08":L==="[object Uint8Array]"?x+="ui08":L==="[object Uint8ClampedArray]"?x+="uic8":L==="[object Int16Array]"?x+="si16":L==="[object Uint16Array]"?x+="ur16":L==="[object Int32Array]"?x+="si32":L==="[object Uint32Array]"?x+="ui32":L==="[object Float32Array]"?x+="fl32":L==="[object Float64Array]"?x+="fl64":w(new Error("Failed to get type for BinaryArray"))),w(x+p(j))}else if(L==="[object Blob]"){var G=new FileReader;G.onload=function(){var Y="~~local_forage_type~"+g.type+"~"+p(this.result);w("__lfsc__:blob"+Y)},G.readAsArrayBuffer(g)}else try{w(JSON.stringify(g))}catch(Y){console.error("Couldn't convert value into a JSON string: ",g),w(null,Y)}}function $(g){if(g.substring(0,h)!=="__lfsc__:")return JSON.parse(g);var w=g.substring(m),L=g.substring(h,m),j;if(L==="blob"&&E.test(w)){var x=w.match(E);j=x[1],w=w.substring(x[0].length)}var G=y(w);switch(L){case"arbf":return G;case"blob":return c([G],{type:j});case"si08":return new Int8Array(G);case"ui08":return new Uint8Array(G);case"uic8":return new Uint8ClampedArray(G);case"si16":return new Int16Array(G);case"ur16":return new Uint16Array(G);case"si32":return new Int32Array(G);case"ui32":return new Uint32Array(G);case"fl32":return new Float32Array(G);case"fl64":return new Float64Array(G);default:throw new Error("Unkown type: "+L)}}function P(g){var w,L;if(g===null||typeof g!="object"||"isActiveClone"in g)return g;var j=g instanceof Date?new Date(g):g.constructor();try{for(var x=s(Object.keys(g)),G=x.next();!G.done;G=x.next()){var Y=G.value;Object.prototype.hasOwnProperty.call(g,Y)&&(g.isActiveClone=null,j[Y]=P(g[Y]),delete g.isActiveClone)}}catch(ie){w={error:ie}}finally{try{G&&!G.done&&(L=x.return)&&L.call(x)}finally{if(w)throw w.error}}return j}function T(g,w){return(g.name||w.name)+"/"+(g.storeName||w.storeName)+"/"}function d(g,w){w&&g.then(function(L){w(null,L)},function(L){w(L)})}function N(){for(var g=[],w=0;w<arguments.length;w++)g[w]=arguments[w];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function C(g,w){var L=this;if(w=N.apply(this,arguments),g=typeof g!="function"&&g||{},!g.name){var j=this.config();g.name=g.name||j.name,g.storeName=g.storeName||j.storeName}var x;return g.name?x=new Promise(function(G){g.storeName?G(T(g,L._defaultConfig)):G(g.name+"/")}):x=Promise.reject("Invalid arguments"),{promise:x,callback:w}}function M(g){return typeof g!="string"&&(console.warn(g+" used as a key, but it is not a string."),g=String(g)),g}var F={bufferToString:p,deserialize:$,serialize:S,stringToBuffer:y},I={},B=function(){function g(w){this.kp=w,this.data={}}return g.resolve=function(w){return I[w]||(I[w]=new g(w)),I[w]},g.prototype.clear=function(){this.data={}},g.prototype.drop=function(){this.clear(),delete I[this.kp]},g.prototype.get=function(w){return this.data[w]},g.prototype.key=function(w){return this.keys()[w]},g.prototype.keys=function(){return Object.keys(this.data)},g.prototype.rm=function(w){delete this.data[w]},g.prototype.set=function(w,L){this.data[w]=L},g}();function D(g){var w=g?P(g):{},L=T(w,this._defaultConfig),j=B.resolve(L);return this._dbInfo=w,this._dbInfo.serializer=F,this._dbInfo.keyPrefix=L,this._dbInfo.mStore=j,Promise.resolve()}function U(g){var w=this,L=this.ready().then(function(){w._dbInfo.mStore.clear()});return d(L,g),L}function z(g,w){var L=C.apply(this,arguments),j=L.promise,x=L.callback,G=j.then(function(Y){B.resolve(Y).drop()});return d(G,x),j}function V(g,w){var L=this;g=M(g);var j=this.ready().then(function(){var x=L._dbInfo.mStore.get(g);return x==null?null:L._dbInfo.serializer.deserialize(x)});return d(j,w),j}function Z(g,w){var L=this,j=this.ready().then(function(){for(var x=L._dbInfo.mStore,G=x.keys(),Y=0;Y<G.length;Y++){var ie=x.get(G[Y]);if(ie&&(ie=L._dbInfo.serializer.deserialize(ie)),ie=g(ie,G[Y],Y+1),ie!==void 0)return ie}});return d(j,w),j}function oe(g,w){var L=this,j=this.ready().then(function(){var x;try{x=L._dbInfo.mStore.key(g),x===void 0&&(x=null)}catch{x=null}return x});return d(j,w),j}function ce(g){var w=this,L=this.ready().then(function(){return w._dbInfo.mStore.keys()});return d(L,g),L}function fe(g){var w=this.keys().then(function(L){return L.length});return d(w,g),w}function he(g,w){var L=this;g=M(g);var j=this.ready().then(function(){L._dbInfo.mStore.rm(g)});return d(j,w),j}function ge(g,w,L){var j=this;g=M(g);var x=this.ready().then(function(){w===void 0&&(w=null);var G=w;return new Promise(function(Y,ie){j._dbInfo.serializer.serialize(w,function(be,ye){if(ye)ie(ye);else try{j._dbInfo.mStore.set(g,be),Y(G)}catch(Le){ie(Le)}})})});return d(x,L),x}var le=!0;r._support=le,r._driver=o,r._initStorage=D,r.clear=U,r.dropInstance=z,r.getItem=V,r.iterate=Z,r.key=oe,r.keys=ce,r.length=fe,r.removeItem=he,r.setItem=ge,Object.defineProperty(r,"__esModule",{value:!0})})}),vt=kr(Bi()),fr=kr(Fi()),Gi={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function qi(e){for(let[t,r]of Object.entries(Gi))e.style[t]=r}function Wi(e){let t=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(t.find(r=>r.src.includes(e)))}var zi=class extends Ci{constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(e=>{let t=()=>{if(Wi(encodeURIComponent(this.parameters)))Jo().log();else{let r=document.createElement("iframe");r.classList.add("magic-iframe"),r.dataset.magicIframeLabel=et(this.endpoint).host,r.title="Secure Modal",r.src=et(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,qi(r),document.body.appendChild(r),e(r)}};["loaded","interactive","complete"].includes(document.readyState)?t():window.addEventListener("load",t,!1)}),window.addEventListener("message",e=>{var t;if(e.origin===this.endpoint&&e.data&&e.data.msgType&&this.messageHandlers.size){e.data.response=(t=e.data.response)!=null?t:{};for(let r of this.messageHandlers.values())r(e)}})}showOverlay(){return Xe(this,null,function*(){let e=yield this.iframe;e.style.display="block",this.activeElement=document.activeElement,e.focus()})}hideOverlay(){return Xe(this,null,function*(){var e;let t=yield this.iframe;t.style.display="none",(e=this.activeElement)!=null&&e.focus&&this.activeElement.focus(),this.activeElement=null})}_post(e){return Xe(this,null,function*(){let t=yield this.iframe;if(t&&t.contentWindow)t.contentWindow.postMessage(e,this.endpoint);else throw Ho()})}},Hi=qo(Pr,{platform:"web",sdkName:"magic-sdk",version:"13.6.2",defaultEndpoint:"https://auth.magic.link/",ViewController:zi,configureStorage:()=>Xe(void 0,null,function*(){let e=vt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(fr),yield e.setDriver([vt.default.INDEXEDDB,vt.default.LOCALSTORAGE,fr._driver]),e})}),Ki=Object.create,xr=Object.defineProperty,Xi=Object.getOwnPropertyDescriptor,Vi=Object.getOwnPropertyNames,Yi=Object.getPrototypeOf,Ji=Object.prototype.hasOwnProperty,Ot=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Qi=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Vi(t))!Ji.call(e,s)&&s!==r&&xr(e,s,{get:()=>t[s],enumerable:!(o=Xi(t,s))||o.enumerable});return e},Ur=(e,t,r)=>(r=e!=null?Ki(Yi(e)):{},Qi(t||!e||!e.__esModule?xr(r,"default",{value:e,enumerable:!0}):r,e)),xe=(e,t,r)=>new Promise((o,s)=>{var c=m=>{try{h(r.next(m))}catch(v){s(v)}},E=m=>{try{h(r.throw(m))}catch(v){s(v)}},h=m=>m.done?o(m.value):Promise.resolve(m.value).then(c,E);h((r=r.apply(e,t)).next())}),Br=Ot((e,t)=>{(function(r,o){typeof e=="object"?t.exports=e=o():typeof define=="function"&&define.amd?define([],o):r.CryptoJS=o()})(e,function(){var r=r||function(o,s){var c=Object.create||function(){function d(){}return function(N){var C;return d.prototype=N,C=new d,d.prototype=null,C}}(),E={},h=E.lib={},m=h.Base=function(){return{extend:function(d){var N=c(this);return d&&N.mixIn(d),(!N.hasOwnProperty("init")||this.init===N.init)&&(N.init=function(){N.$super.init.apply(this,arguments)}),N.init.prototype=N,N.$super=this,N},create:function(){var d=this.extend();return d.init.apply(d,arguments),d},init:function(){},mixIn:function(d){for(var N in d)d.hasOwnProperty(N)&&(this[N]=d[N]);d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),v=h.WordArray=m.extend({init:function(d,N){d=this.words=d||[],N!=s?this.sigBytes=N:this.sigBytes=d.length*4},toString:function(d){return(d||p).stringify(this)},concat:function(d){var N=this.words,C=d.words,M=this.sigBytes,F=d.sigBytes;if(this.clamp(),M%4)for(var I=0;I<F;I++){var B=C[I>>>2]>>>24-I%4*8&255;N[M+I>>>2]|=B<<24-(M+I)%4*8}else for(var I=0;I<F;I+=4)N[M+I>>>2]=C[I>>>2];return this.sigBytes+=F,this},clamp:function(){var d=this.words,N=this.sigBytes;d[N>>>2]&=4294967295<<32-N%4*8,d.length=o.ceil(N/4)},clone:function(){var d=m.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var N=[],C=function(D){var D=D,U=987654321,z=4294967295;return function(){U=36969*(U&65535)+(U>>16)&z,D=18e3*(D&65535)+(D>>16)&z;var V=(U<<16)+D&z;return V/=4294967296,V+=.5,V*(o.random()>.5?1:-1)}},M=0,F;M<d;M+=4){var I=C((F||o.random())*4294967296);F=I()*987654071,N.push(I()*4294967296|0)}return new v.init(N,d)}}),y=E.enc={},p=y.Hex={stringify:function(d){for(var N=d.words,C=d.sigBytes,M=[],F=0;F<C;F++){var I=N[F>>>2]>>>24-F%4*8&255;M.push((I>>>4).toString(16)),M.push((I&15).toString(16))}return M.join("")},parse:function(d){for(var N=d.length,C=[],M=0;M<N;M+=2)C[M>>>3]|=parseInt(d.substr(M,2),16)<<24-M%8*4;return new v.init(C,N/2)}},S=y.Latin1={stringify:function(d){for(var N=d.words,C=d.sigBytes,M=[],F=0;F<C;F++){var I=N[F>>>2]>>>24-F%4*8&255;M.push(String.fromCharCode(I))}return M.join("")},parse:function(d){for(var N=d.length,C=[],M=0;M<N;M++)C[M>>>2]|=(d.charCodeAt(M)&255)<<24-M%4*8;return new v.init(C,N)}},$=y.Utf8={stringify:function(d){try{return decodeURIComponent(escape(S.stringify(d)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(d){return S.parse(unescape(encodeURIComponent(d)))}},P=h.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new v.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=$.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var N=this._data,C=N.words,M=N.sigBytes,F=this.blockSize,I=F*4,B=M/I;d?B=o.ceil(B):B=o.max((B|0)-this._minBufferSize,0);var D=B*F,U=o.min(D*4,M);if(D){for(var z=0;z<D;z+=F)this._doProcessBlock(C,z);var V=C.splice(0,D);N.sigBytes-=U}return new v.init(V,U)},clone:function(){var d=m.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0});h.Hasher=P.extend({cfg:m.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){P.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){d&&this._append(d);var N=this._doFinalize();return N},blockSize:16,_createHelper:function(d){return function(N,C){return new d.init(C).finalize(N)}},_createHmacHelper:function(d){return function(N,C){return new T.HMAC.init(d,C).finalize(N)}}});var T=E.algo={};return E}(Math);return r})}),Zi=Ot((e,t)=>{(function(r,o){typeof e=="object"?t.exports=e=o(Br()):typeof define=="function"&&define.amd?define(["./core"],o):o(r.CryptoJS)})(e,function(r){return function(o){var s=r,c=s.lib,E=c.WordArray,h=c.Hasher,m=s.algo,v=[],y=[];(function(){function $(N){for(var C=o.sqrt(N),M=2;M<=C;M++)if(!(N%M))return!1;return!0}function P(N){return(N-(N|0))*4294967296|0}for(var T=2,d=0;d<64;)$(T)&&(d<8&&(v[d]=P(o.pow(T,1/2))),y[d]=P(o.pow(T,1/3)),d++),T++})();var p=[],S=m.SHA256=h.extend({_doReset:function(){this._hash=new E.init(v.slice(0))},_doProcessBlock:function($,P){for(var T=this._hash.words,d=T[0],N=T[1],C=T[2],M=T[3],F=T[4],I=T[5],B=T[6],D=T[7],U=0;U<64;U++){if(U<16)p[U]=$[P+U]|0;else{var z=p[U-15],V=(z<<25|z>>>7)^(z<<14|z>>>18)^z>>>3,Z=p[U-2],oe=(Z<<15|Z>>>17)^(Z<<13|Z>>>19)^Z>>>10;p[U]=V+p[U-7]+oe+p[U-16]}var ce=F&I^~F&B,fe=d&N^d&C^N&C,he=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22),ge=(F<<26|F>>>6)^(F<<21|F>>>11)^(F<<7|F>>>25),le=D+ge+ce+y[U]+p[U],g=he+fe;D=B,B=I,I=F,F=M+le|0,M=C,C=N,N=d,d=le+g|0}T[0]=T[0]+d|0,T[1]=T[1]+N|0,T[2]=T[2]+C|0,T[3]=T[3]+M|0,T[4]=T[4]+F|0,T[5]=T[5]+I|0,T[6]=T[6]+B|0,T[7]=T[7]+D|0},_doFinalize:function(){var $=this._data,P=$.words,T=this._nDataBytes*8,d=$.sigBytes*8;return P[d>>>5]|=128<<24-d%32,P[(d+64>>>9<<4)+14]=o.floor(T/4294967296),P[(d+64>>>9<<4)+15]=T,$.sigBytes=P.length*4,this._process(),this._hash},clone:function(){var $=h.clone.call(this);return $._hash=this._hash.clone(),$}});s.SHA256=h._createHelper(S),s.HmacSHA256=h._createHmacHelper(S)}(Math),r.SHA256})}),ea=Ot((e,t)=>{(function(r,o){typeof e=="object"?t.exports=e=o(Br()):typeof define=="function"&&define.amd?define(["./core"],o):o(r.CryptoJS)})(e,function(r){return function(){var o=r,s=o.lib,c=s.WordArray,E=o.enc;E.Base64={stringify:function(m){var v=m.words,y=m.sigBytes,p=this._map;m.clamp();for(var S=[],$=0;$<y;$+=3)for(var P=v[$>>>2]>>>24-$%4*8&255,T=v[$+1>>>2]>>>24-($+1)%4*8&255,d=v[$+2>>>2]>>>24-($+2)%4*8&255,N=P<<16|T<<8|d,C=0;C<4&&$+C*.75<y;C++)S.push(p.charAt(N>>>6*(3-C)&63));var M=p.charAt(64);if(M)for(;S.length%4;)S.push(M);return S.join("")},parse:function(m){var v=m.length,y=this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var S=0;S<y.length;S++)p[y.charCodeAt(S)]=S}var $=y.charAt(64);if($){var P=m.indexOf($);P!==-1&&(v=P)}return h(m,v,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function h(m,v,y){for(var p=[],S=0,$=0;$<v;$++)if($%4){var P=y[m.charCodeAt($-1)]<<$%4*2,T=y[m.charCodeAt($)]>>>6-$%4*2;p[S>>>2]|=(P|T)<<24-S%4*8,S++}return c.create(p,S)}}(),r.enc.Base64})}),ta=(e=>(e.ParseRedirectResult="magic_oauth_parse_redirect_result",e))(ta||{}),ra=(e=>(e.InvalidRequest="invalid_request",e.InvalidClient="invalid_client",e.InvalidScope="invalid_scope",e.InvalidGrant="invalid_grant",e.UnauthorizedClient="unauthorized_client",e.UnsupportedResponseType="unsupported_response_type",e.UnsupportedGrantType="unsupported_grant_type",e.UnsupportedTokenType="unsupported_token_type",e.AccessDenied="access_denied",e.ServerError="server_error",e.TemporarilyUnavailable="temporarily_unavailable",e))(ra||{}),na=Ur(Zi()),oa=Ur(ea()),dr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",Fr=typeof window<"u"&&!!window.crypto,ia=Fr&&!!window.crypto.subtle;function aa(e){return Array.from(e).map(t=>dr[t%dr.length]).join("")}function hr(e){let t=r=>r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");if(e instanceof ArrayBuffer){let r=new Uint8Array(e),o=Array.from(r).map(c=>String.fromCharCode(c)).join(""),s=btoa(o);return t(s)}return t(oa.default.stringify(e))}function sa(e){return xe(this,null,function*(){if(ia){let t=new TextEncoder().encode(e);return crypto.subtle.digest("SHA-256",t).then(hr)}return hr((0,na.default)(e))})}function pr(e){let t=new Uint8Array(e);if(Fr)window.crypto.getRandomValues(t);else for(let r=0;r<e;r+=1)t[r]=Math.floor(Math.random()*Math.floor(255));return aa(t)}function ca(){return xe(this,null,function*(){let e=pr(128),t=pr(128),r=yield sa(t);return{verifier:t,challenge:r,state:e}})}var ua=class extends Ne.Internal{constructor(){super(...arguments),this.name="oauth",this.config={},this.compat={"magic-sdk":">=2.4.6","@magic-sdk/react-native":!1,"@magic-sdk/react-native-bare":!1,"@magic-sdk/react-native-expo":!1}}loginWithRedirect(e){return this.utils.createPromiEvent(t=>xe(this,null,function*(){let{provider:r,query:o}=yield la.call(this,e);window.location.href=new URL(`/v1/oauth2/${r}/start?${o}`,this.sdk.endpoint).href,t()}))}getRedirectResult(){let e=window.location.search,t=window.location.origin+window.location.pathname;return window.history.replaceState(null,"",t),fa.call(this,e)}},tt="oauth_redirect_metadata";function la(e){return xe(this,null,function*(){yield this.utils.storage.removeItem(tt);let{provider:t,redirectURI:r,scope:o,loginHint:s}=e,{verifier:c,challenge:E,state:h}=yield ca(),m=JSON.stringify({verifier:c,state:h});return yield this.utils.storage.setItem(tt,m),{query:[`magic_api_key=${encodeURIComponent(this.sdk.apiKey)}`,`magic_challenge=${encodeURIComponent(E)}`,`state=${encodeURIComponent(h)}`,`platform=${encodeURIComponent("web")}`,o&&`scope=${encodeURIComponent(o.join(" "))}`,r&&`redirect_uri=${encodeURIComponent(r)}`,s&&`login_hint=${encodeURIComponent(s)}`].reduce((v,y)=>y?`${v}&${y}`:v),provider:t,redirectURI:r}})}function fa(e){return this.utils.createPromiEvent((t,r)=>xe(this,null,function*(){var o;let s=yield this.utils.storage.getItem(tt),{verifier:c,state:E}=JSON.parse(s);this.utils.storage.removeItem(tt);let h=this.utils.createJsonRpcRequestPayload("magic_oauth_parse_redirect_result",[e,c,E]),m=yield this.request(h),v=m,y=m;y.error&&r(this.createError(y.error,(o=y.error_description)!=null?o:"An error occurred.",{errorURI:y.error_uri,provider:y.provider})),t(v)}))}const da=!1;class ha extends jn{constructor(t){super(t),ht(this,"id","magic-link"),ht(this,"name","Magic Link"),ht(this,"ready",!da),this.magicOptions=t.options}async getAccount(){const o=await new Ht(await this.getProvider()).getSigner().getAddress();return o.startsWith("0x")?o:`0x${o}`}async getProvider(){if(this.provider)return this.provider;const t=this.getMagicSDK();return this.provider=t.rpcProvider,this.provider}async getSigner(){return await new Ht(await this.getProvider()).getSigner()}async isAuthorized(){const t=this.getMagicSDK();try{return await t.user.isLoggedIn()}catch{return!1}}onAccountsChanged(t){t.length===0?this.emit("disconnect"):t[0]&&this.emit("change",{account:Pn(t[0])})}onChainChanged(t){const r=vr(t),o=this.isChainUnsupported(r);this.emit("change",{chain:{id:r,unsupported:o}})}onDisconnect(){this.emit("disconnect")}async disconnect(){await this.getMagicSDK().user.logout()}}var mt=new WeakMap,gt=new WeakMap;class ga extends ha{constructor(t){var r,o;super(t),Kt(this,mt,{writable:!0,value:void 0}),Kt(this,gt,{writable:!0,value:void 0}),this.magicSdkConfiguration=t.options.magicSdkConfiguration,Xt(this,gt,t.options.type),this.oauthProviders=((r=t.options.oauthOptions)==null?void 0:r.providers)||[],this.oauthRedirectURI=(o=t.options.oauthOptions)==null?void 0:o.redirectURI}async connect(t){if(!this.magicOptions.apiKey)throw new Error("Magic API Key is not provided.");try{t.chainId&&this.initializeMagicSDK({chainId:t.chainId});const r=await this.getProvider();this.setupListeners(),this.emit("message",{type:"connecting"});const o=await this.isAuthorized();let s;try{s=await this.getChainId()}catch{s=0}if(Xt(this,mt,s),o)return{provider:r,chain:{id:s,unsupported:!1},account:await this.getAccount()};const c=this.getMagicSDK();if(Vt(this,gt)==="connect")("email"in t||"phoneNumber"in t)&&console.warn("Passing email or phoneNumber is not required for Magic Connect"),await c.wallet.connectWithUI();else if("oauthProvider"in t)await c.oauth.loginWithRedirect({provider:t.oauthProvider,redirectURI:this.oauthRedirectURI||window.location.href}),await new Promise(m=>{setTimeout(m,1e4)});else if("email"in t)await c.auth.loginWithMagicLink({email:t.email,showUI:!0});else if("phoneNumber"in t)await c.auth.loginWithSMS({phoneNumber:t.phoneNumber});else throw new Error("Invalid options: Either provide and email, phoneNumber or oauthProvider when using Magic Auth");let h=await(await this.getSigner()).getAddress();return h.startsWith("0x")||(h=`0x${h}`),{account:h,chain:{id:s,unsupported:!1},provider:r}}catch(r){throw console.error(r),new Error("Something went wrong")}}async getChainId(){var r;const t=(r=this.magicSdkConfiguration)==null?void 0:r.network;if(typeof t=="object"){const o=t.chainId;if(o)return vr(o)}throw new Error("Chain ID is not defined")}initializeMagicSDK(){let{chainId:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={...this.magicSdkConfiguration,extensions:[new ua]};if(t){const o=this.chains.find(s=>s.chainId===t);o&&(r.network={rpcUrl:o.rpc[0]||"",chainId:o.chainId})}return this.magicSDK=new Hi(this.magicOptions.apiKey,r),this.provider=this.magicSDK.rpcProvider,this.magicSDK}getMagicSDK(){return this.magicSDK?this.magicSDK:this.initializeMagicSDK()}async setupListeners(){const t=await this.getProvider();t.on("accountsChanged",this.onAccountsChanged),t.on("chainChanged",this.onChainChanged),t.on("disconnect",this.onDisconnect)}async switchChain(t){const r=this.chains.find(o=>o.chainId===t);if(!r)throw new Error("Chain not found");return Vt(this,mt)!==t&&this.initializeMagicSDK({chainId:t}),r}}export{ga as MagicAuthConnector,ha as MagicBaseConnector};
