import{a as te,A as w,_ as h,W as p,T as he,b as c,w as g,g as ae,u as v,c as ne,d as ie,e as K,f as Z,h as f,i as ue,j as re,k as J,r as ge,l as E,m as $,n as z,o as we,p as se,S as oe,q as me,s as Ie,t as pe,v as ye,x as Ee,y as Me,z as fe,B as Le,C as De,D as Ae,E as Ce,F as Se,G as _e,H as Ne,I as ve,J as Te,K as We,L as Oe,M as be,N as je,O as Ue,P as Pe,Q as ze,R as Re,U as ke,Z as xe}from"./index.293c77a4.js";import{W as Ge,A as Qe,C as Ve,P as Be,S as Ye,U as Ke}from"./errors-d961f852.browser.esm.61f33de0.js";import{n as Ze}from"./normalizeChainId-e4cc0175.browser.esm.042707b7.js";import{E as qe}from"./constants-1ba9df2b.browser.esm.1400d5f9.js";function ce(){if(te(globalThis.window)&&globalThis.window.ethereum&&window.okxwallet)return window.okxwallet}class j extends w{get walletName(){return"OKX"}constructor(e){super(j.id,e),this.isInjected=!!ce()}async getConnector(){var e,t,a;if(!this.connector)if(this.isInjected){const{OKXConnector:i}=await h(()=>import("./thirdweb-dev-wallets-evm-connectors-okx.browser.esm.b483cd43.js"),["assets/thirdweb-dev-wallets-evm-connectors-okx.browser.esm.b483cd43.js","assets/index.293c77a4.js","assets/index.09a325bf.css","assets/errors-d961f852.browser.esm.61f33de0.js","assets/thirdweb-dev-wallets-evm-connectors-injected.browser.esm.9f3f993d.js","assets/url-bc88b2b6.browser.esm.94115fe4.js","assets/normalizeChainId-e4cc0175.browser.esm.042707b7.js","assets/constants-1ba9df2b.browser.esm.1400d5f9.js"]);this.OKXConnector=new i({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}}),this.connector=new p(this.OKXConnector)}else{const{WalletConnectConnector:i}=await h(()=>import("./thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm.09fd89ac.js"),["assets/thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm.09fd89ac.js","assets/index.293c77a4.js","assets/index.09a325bf.css","assets/url-bc88b2b6.browser.esm.94115fe4.js","assets/errors-d961f852.browser.esm.61f33de0.js"]),r=new i({chains:this.chains,options:{projectId:((e=this.options)==null?void 0:e.projectId)||he,storage:this.walletStorage,qrcode:(t=this.options)==null?void 0:t.qrcode,dappMetadata:this.dappMetadata,qrModalOptions:(a=this.options)==null?void 0:a.qrModalOptions}});r.getProvider().then(s=>{s.signer.client.on("session_request_sent",()=>{this.emit("wc_session_request_sent")})}),this.walletConnectConnector=r,this.connector=new p(r)}return this.connector}async connectWithQrCode(e){await this.getConnector();const t=this.walletConnectConnector;if(!t)throw new Error("WalletConnect connector not found");(await t.getProvider()).on("display_uri",i=>{e.onQrCodeUri(i)}),this.connect({chainId:e.chainId}).then(e.onConnected)}async switchAccount(){if(!this.OKXConnector)throw new Error("Can not switch Account");await this.OKXConnector.switchAccount()}}c(j,"id",g.okx);class L extends w{get walletName(){return"Paper Wallet"}constructor(e){var t,a;super(L.id,{...e});try{this.chain={...e.chain,rpc:ae(e.chain,e.clientId)}}catch{this.chain=e.chain}if(e.paperClientId&&e.paperClientId==="uninitialized"){this.paperClientId="00000000-0000-0000-0000-000000000000";return}if(e.advancedOptions&&((t=e.advancedOptions)==null?void 0:t.recoveryShareManagement)==="USER_MANAGED"&&(e.paperClientId&&!this.isClientIdLegacyPaper(e.paperClientId)||!e.paperClientId&&e.clientId&&!this.isClientIdLegacyPaper(e.clientId)))throw new Error('RecoveryShareManagement option "USER_MANAGED" is not supported with thirdweb client ID');if(!e.clientId&&!e.paperClientId)throw new Error("clientId or paperClientId is required");if(e.paperClientId&&!this.isClientIdLegacyPaper(e.paperClientId))throw new Error("paperClientId must be a legacy paper client ID");if(e.clientId&&this.isClientIdLegacyPaper(e.clientId))throw new Error("clientId must be a thirdweb client ID");this.paperClientId=(a=e.paperClientId)!=null?a:e.clientId,this.onAuthSuccess=e.onAuthSuccess}isClientIdLegacyPaper(e){return e.indexOf("-")>0&&e.length===36}async getConnector(){var e,t,a;if(!this.connector){const{PaperWalletConnector:i}=await h(()=>import("./thirdweb-dev-wallets-evm-connectors-paper.browser.esm.b4c01729.js"),["assets/thirdweb-dev-wallets-evm-connectors-paper.browser.esm.b4c01729.js","assets/index.293c77a4.js","assets/index.09a325bf.css","assets/normalizeChainId-e4cc0175.browser.esm.042707b7.js","assets/errors-d961f852.browser.esm.61f33de0.js","assets/constants-1ba9df2b.browser.esm.1400d5f9.js"]);this.connector=new i({clientId:this.paperClientId,chain:this.chain,chains:this.chains,onAuthSuccess:this.onAuthSuccess,advancedOptions:{recoveryShareManagement:(t=(e=this.options)==null?void 0:e.advancedOptions)==null?void 0:t.recoveryShareManagement},styles:(a=this.options)==null?void 0:a.styles})}return this.connector}getConnectParams(){const e=super.getConnectParams();if(!!e)return typeof e.googleLogin=="object"?{...e,googleLogin:!0}:e}async getEmail(){return(await this.getConnector()).getEmail()}async getPaperSDK(){return(await this.getConnector()).getPaperSDK()}}c(L,"id",g.paper);c(L,"meta",{name:"Paper Wallet",iconURL:"ipfs://QmNrLXtPoFrh4yjZbXui39zUMozS1oetpgU8dvZhFAxfRa/paper-logo-icon.svg"});class D extends w{constructor(e){(e==null?void 0:e.chain)&&e.clientId&&(e.chain=v(e.chain,e.clientId)),super(D.id,e),c(this,"name","Blocto")}async initConnector(){var a,i,r;const{BloctoConnector:e}=await h(()=>import("./thirdweb-dev-wallets-evm-connectors-blocto.browser.esm.870b1f73.js"),["assets/thirdweb-dev-wallets-evm-connectors-blocto.browser.esm.870b1f73.js","assets/index.293c77a4.js","assets/index.09a325bf.css","assets/url-bc88b2b6.browser.esm.94115fe4.js","assets/errors-d961f852.browser.esm.61f33de0.js","assets/normalizeChainId-e4cc0175.browser.esm.042707b7.js"]),t=new e({chains:this.chains,options:{appId:(a=this.options)==null?void 0:a.appId,chainId:(r=(i=this.options)==null?void 0:i.chain)==null?void 0:r.chainId}});return this.connector=new p(t),this.connector}async getConnector(){return this.connector?Promise.resolve(this.connector):await this.initConnector()}}c(D,"id",g.blocto);c(D,"meta",{name:"Blocto",iconURL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzIyMzNfMjM4NykiPgo8cmVjdCB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHJ4PSIxMiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTMyLjkwMjggMTguMzA2M0MyOC4zOTExIDE4LjMwNjMgMjMuOTg3MyAyMC4wNDU5IDIwLjY5NTIgMjMuMTMxOUMxNy4wODQzIDI2LjUxNzYgMTQuNzk5MiAzMS41MTc3IDEzLjQ4OTMgMzYuMjIxMkMxMi42MzE0IDM5LjI5OTIgMTIuMjAxNiA0Mi40OTE1IDEyLjIwMTYgNDUuNjg1M0MxMi4yMDE2IDQ2LjY1MTEgMTIuMjQxMiA0Ny42MDg5IDEyLjMxNzQgNDguNTU1NkMxMi40MTA5IDQ5LjcwNjkgMTMuNTMyMSA1MC41MDQ2IDE0LjY0ODUgNTAuMjAzM0MxNS42MjIyIDQ5Ljk0MTYgMTYuNjQ2NiA0OS44MDA1IDE3LjcwMjggNDkuODAwNUMxOS44NzIyIDQ5LjgwMDUgMjEuOTA1MiA1MC4zOTA0IDIzLjY0OCA1MS40MjEyQzIzLjY5MDggNTEuNDQ2NiAyMy43MzIgNTEuNDcxOSAyMy43NzQ4IDUxLjQ5NTdDMjYuNjA3MSA1My4xODQ2IDI5Ljk0ODQgNTQuMTEyMyAzMy41MTE3IDUzLjk5MzRDNDIuODA2MiA1My42ODU3IDUwLjM5OSA0Ni4xMjMgNTAuNzQxNiAzNi44MzAxQzUxLjExNTggMjYuNjYzNSA0Mi45ODY5IDE4LjMwNDcgMzIuOTA0NCAxOC4zMDQ3TDMyLjkwMjggMTguMzA2M1pNMzIuOTAyOCA0NC4zMTJDMjguMzk3NSA0NC4zMTIgMjQuNzQ1NCA0MC42NTk5IDI0Ljc0NTQgMzYuMTU2MkMyNC43NDU0IDMxLjY1MjUgMjguMzk3NSAyNy45OTg3IDMyLjkwMjggMjcuOTk4N0MzNy40MDgxIDI3Ljk5ODcgNDEuMDYwMiAzMS42NTA5IDQxLjA2MDIgMzYuMTU2MkM0MS4wNjAyIDQwLjY2MTQgMzcuNDA4MSA0NC4zMTIgMzIuOTAyOCA0NC4zMTJaIiBmaWxsPSIjMTRBQUZGIi8+CjxwYXRoIGQ9Ik0yNS41NjM2IDEyLjY4MjZDMjUuNTYzNiAxNS4wMzQ0IDI0LjMzMTUgMTcuMjE2NCAyMi4zMDggMTguNDE1M0MyMS4wMzc3IDE5LjE2ODYgMTkuODQ2OCAyMC4wNTgyIDE4Ljc2ODQgMjEuMDcxNUMxNi4zNzU1IDIzLjMxMzkgMTQuNTg5OCAyNi4wNjUzIDEzLjI2NzMgMjguNzkyOUMxMy4wMDcyIDI5LjMzMDQgMTIuMiAyOS4xNDAyIDEyLjIgMjguNTQyM1YxMi42ODI2QzEyLjIgOC45OTI0MiAxNS4xOTI0IDYgMTguODgyNiA2QzIyLjU3MjggNiAyNS41NjUyIDguOTkyNDIgMjUuNTY1MiAxMi42ODI2SDI1LjU2MzZaIiBmaWxsPSIjMDA3NUZGIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMjIzM18yMzg3Ij4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=",urls:{android:"https://play.google.com/store/apps/details?id=com.portto.blocto",ios:"https://apps.apple.com/app/blocto/id1481181682"}});class y extends w{static async sendVerificationEmail(e){return new y({chain:ne,clientId:e.clientId}).sendVerificationEmail({email:e.email})}get walletName(){return"Embedded Wallet"}constructor(e){super(y.id,{...e});try{this.chain={...e.chain,rpc:ae(e.chain,e.clientId)}}catch{this.chain=e.chain}}async getConnector(){var e,t,a;if(!this.connector){const{EmbeddedWalletConnector:i}=await h(()=>import("./thirdweb-dev-wallets-evm-connectors-embedded-wallet.browser.esm.fa48e2f3.js"),["assets/thirdweb-dev-wallets-evm-connectors-embedded-wallet.browser.esm.fa48e2f3.js","assets/index.293c77a4.js","assets/index.09a325bf.css","assets/normalizeChainId-e4cc0175.browser.esm.042707b7.js","assets/errors-d961f852.browser.esm.61f33de0.js","assets/constants-1ba9df2b.browser.esm.1400d5f9.js"]);this.connector=new i({clientId:(t=(e=this.options)==null?void 0:e.clientId)!=null?t:"",chain:this.chain,chains:this.chains,onAuthSuccess:(a=this.options)==null?void 0:a.onAuthSuccess})}return this.connector}autoConnect(e){if(!e)throw new Error("Can't autoconnect embedded wallet");return this.connect(e)}getConnectParams(){const e=super.getConnectParams();if(!!e)return{chainId:e.chainId,authResult:{user:e.authResult.user}}}async getEmail(){return(await this.getConnector()).getEmail()}async getEmbeddedWalletSDK(){return(await this.getConnector()).getEmbeddedWalletSDK()}async getRecoveryInformation(){return(await this.getConnector()).getRecoveryInformation()}async sendVerificationEmail(e){let{email:t}=e;return(await this.getConnector()).sendVerificationEmail({email:t})}async authenticate(e){return(await this.getConnector()).authenticate(e)}}c(y,"id",g.embeddedWallet);c(y,"meta",{name:"Embedded Wallet",iconURL:"ipfs://QmNx2evQa6tcQs9VTd3YaDm31ckfStvgRGKFGELahUmrbV/emailIcon.svg"});var R=new WeakMap;class Fe extends ie{constructor(e){super(),K(this,R,{writable:!0,value:void 0}),Z(this,R,e)}async getSigner(){return f(this,R)}}class U extends w{get walletName(){return"Frame Wallet"}constructor(e){super(U.id,e)}async getConnector(){if(!this.connector){const{FrameConnector:e}=await h(()=>import("./thirdweb-dev-wallets-evm-connectors-frame.browser.esm.cdf3a27a.js"),["assets/thirdweb-dev-wallets-evm-connectors-frame.browser.esm.cdf3a27a.js","assets/index.293c77a4.js","assets/index.09a325bf.css","assets/url-bc88b2b6.browser.esm.94115fe4.js","assets/errors-d961f852.browser.esm.61f33de0.js","assets/normalizeChainId-e4cc0175.browser.esm.042707b7.js"]);this.connector=new p(new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}}))}return this.connector}}c(U,"id",g.frame);class P extends w{get walletName(){return"Injected Wallet"}constructor(e){super(P.id,e)}async getConnector(){if(!this.connector){const{InjectedConnector:e}=await h(()=>import("./thirdweb-dev-wallets-evm-connectors-injected.browser.esm.9f3f993d.js"),["assets/thirdweb-dev-wallets-evm-connectors-injected.browser.esm.9f3f993d.js","assets/index.293c77a4.js","assets/index.09a325bf.css","assets/url-bc88b2b6.browser.esm.94115fe4.js","assets/errors-d961f852.browser.esm.61f33de0.js","assets/normalizeChainId-e4cc0175.browser.esm.042707b7.js"]);this.connector=new p(new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}}))}return this.connector}}c(P,"id","injected");const B="localWalletData";var M=new WeakMap,_=new WeakSet;class A extends w{get walletName(){return"Local Wallet"}constructor(e){super(A.id,e),ue(this,_),K(this,M,{writable:!0,value:void 0}),(e==null?void 0:e.chain)&&e.clientId&&(e.chain=v(e.chain,e.clientId)),this.options=e||{},Z(this,M,(e==null?void 0:e.storage)||re(g.localWallet))}async getConnector(){if(!this.connector){const{LocalWalletConnector:e}=await h(()=>import("./thirdweb-dev-wallets-evm-connectors-local-wallet.browser.esm.dbe14f0e.js"),["assets/thirdweb-dev-wallets-evm-connectors-local-wallet.browser.esm.dbe14f0e.js","assets/index.293c77a4.js","assets/index.09a325bf.css","assets/normalizeChainId-e4cc0175.browser.esm.042707b7.js"]);if(!this.ethersWallet)throw new Error("wallet is not initialized");const t=(this.options.chain?[...J,this.options.chain]:J).map(a=>v(a,this.options.clientId));this.connector=new e({chain:this.options.chain||v(ne,this.options.clientId),ethersWallet:this.ethersWallet,chains:this.chains||t,clientId:this.options.clientId,secretKey:this.options.secretKey})}return this.connector}async loadOrCreate(e){await this.getSavedData(e.storage)?await this.load(e):(await this.generate(),await this.save(e))}async generate(){if(this.ethersWallet)throw new Error("wallet is already initialized");const e=ge(32);return this.ethersWallet=new E(e),this.ethersWallet.address}async import(e){if(this.ethersWallet)throw new Error("wallet is already initialized");if("encryptedJson"in e)return this.ethersWallet=await E.fromEncryptedJson(e.encryptedJson,e.password),this.ethersWallet.address;if("privateKey"in e){if(!e.encryption&&!Y(e.privateKey))throw new Error("invalid private key");const t=await X(e.encryption)(e.privateKey);if(e.encryption&&(t===""||!Y(t)))throw new Error("invalid password");return this.ethersWallet=new E(t),this.ethersWallet.address}if("mnemonic"in e){if(!e.encryption&&!$(e.mnemonic))throw new Error("invalid mnemonic");const t=await X(e.encryption)(e.mnemonic);if(e.encryption&&(t===""||!$(t)))throw new Error("invalid password");return this.ethersWallet=E.fromMnemonic(t),this.ethersWallet.address}throw new Error("invalid import strategy")}async load(e){if(this.ethersWallet)throw new Error("wallet is already initialized");const t=await this.getSavedData(e.storage);if(!t)throw new Error("No Saved wallet found in storage");if(t.strategy!==e.strategy)throw new Error(`Saved wallet data is not ${e.strategy}, it is ${t.strategy}`);if(e.strategy==="encryptedJson")return this.import({encryptedJson:t.data,password:e.password});if(t.isEncrypted&&!e.encryption)throw new Error("Saved wallet data is encrypted, but no password is provided");if(!t.isEncrypted&&e.encryption)throw new Error("Saved wallet data is not encrypted, but encryption config is provided");if(e.strategy==="privateKey")return this.import({privateKey:t.data,encryption:e.encryption});if(e.strategy==="mnemonic")return this.import({mnemonic:t.data,encryption:e.encryption});throw new Error("invalid load strategy")}async save(e){const t=this.ethersWallet;if(!t)throw new Error("Wallet is not initialized");if(e.strategy==="encryptedJson"){const a=await t.encrypt(e.password,{scrypt:{N:1}});await z(this,_,k).call(this,{address:t.address,data:a,strategy:"encryptedJson",isEncrypted:!0},e.storage)}if(e.strategy==="privateKey"){const a=await N(e.encryption)(t.privateKey);await z(this,_,k).call(this,{address:t.address,data:a,strategy:"privateKey",isEncrypted:!!e.encryption},e.storage)}if(e.strategy==="mnemonic"){if(!t.mnemonic)throw new Error("mnemonic can not be computed if wallet is created from a private key or generated using generate()");const a=await N(e.encryption)(t.mnemonic.phrase);await z(this,_,k).call(this,{address:t.address,data:a,strategy:"mnemonic",isEncrypted:!!e.encryption},e.storage)}}async isSaved(){try{const e=await this.getSavedData(),t=await this.getAddress();return(e==null?void 0:e.address)===t}catch{return!1}}async deleteSaved(){await f(this,M).removeItem(B)}async export(e){const t=this.ethersWallet;if(!t)throw new Error("Wallet is not initialized");if(e.strategy==="encryptedJson")return t.encrypt(e.password,{scrypt:{N:1<<32}});if(e.strategy==="privateKey")return N(e.encryption)(t.privateKey);if(e.strategy==="mnemonic"){if(!t.mnemonic)throw new Error("mnemonic can not be computed if wallet is created from a private key or generated using generate()");return N(e.encryption)(t.mnemonic.phrase)}throw new Error("Invalid export strategy")}async getSavedData(e){const t=e||f(this,M);try{const a=await t.getItem(B);if(!a)return null;const i=JSON.parse(a);return i||null}catch{return null}}async disconnect(){await super.disconnect(),this.ethersWallet=void 0}}async function k(n,e){await(e||f(this,M)).setItem(B,JSON.stringify(n))}c(A,"id",g.localWallet);c(A,"meta",{name:"Local Wallet",iconURL:"ipfs://QmbQzSNGvmNYZzem9jZRuYeLe9K2W4pqbdnVUp7Y6edQ8Y/local-wallet.svg"});async function He(n,e){return(await h(()=>import("./index.bba7843b.js").then(a=>a.i),["assets/index.bba7843b.js","assets/index.293c77a4.js","assets/index.09a325bf.css"])).default.AES.encrypt(n,e).toString()}async function Je(n,e){const t=(await h(()=>import("./index.bba7843b.js").then(a=>a.i),["assets/index.bba7843b.js","assets/index.293c77a4.js","assets/index.09a325bf.css"])).default;return t.AES.decrypt(n,e).toString(t.enc.Utf8)}function X(n){return n?t=>(n.decrypt||Je)(t,n.password):async t=>t}function N(n){return n?t=>(n.encrypt||He)(t,n.password):async t=>t}function Y(n){return!!n.match(/^(0x)?[0-9a-f]{64}$/i)}class C extends w{get walletName(){return"Magic Link"}constructor(e){super(C.id,e),this.options=e}async initializeConnector(){const{MagicAuthConnector:e}=await h(()=>import("./thirdweb-dev-wallets-evm-connectors-magic.browser.esm.dcbc2e25.js"),["assets/thirdweb-dev-wallets-evm-connectors-magic.browser.esm.dcbc2e25.js","assets/index.293c77a4.js","assets/index.09a325bf.css","assets/errors-d961f852.browser.esm.61f33de0.js","assets/normalizeChainId-e4cc0175.browser.esm.042707b7.js"]),t=new e({chains:this.chains,options:this.options});return this.magicConnector=t,this.connector=new p(t),this.connector}async getConnector(){return this.connector?this.connector:await this.initializeConnector()}getMagic(){if(!this.magicConnector)throw new Error("Magic connector is not initialized");return this.magicConnector.getMagicSDK()}async autoConnect(e){var i;await this.initializeConnector(),await((i=this.magicConnector)==null?void 0:i.initializeMagicSDK(e));const t=this.getMagic();if(new URL(window.location.href).searchParams.get("magic_credential"))try{this.oAuthRedirectResult=await t.oauth.getRedirectResult()}catch{}if(await t.user.isLoggedIn())return super.autoConnect(e);throw new Error("Magic user is not logged in")}async disconnect(){return this.oAuthRedirectResult=void 0,await this.getMagic().user.logout(),super.disconnect()}async connect(e){if("email"in e&&this.options.emailLogin===!1)throw new Error("Email login is disabled");if("phoneNumber"in e&&this.options.smsLogin===!1)throw new Error("SMS login is disabled");return super.connect(e)}}c(C,"meta",{iconURL:"ipfs://QmUMBFZGXxBpgDmZzZAHhbcCL5nYvZnVaYLTajsNjLcxMU/1-Icon_Magic_Color.svg",name:"Magic Link"});c(C,"id",g.magicLink);var x=new WeakMap;class $e extends ie{constructor(e,t,a){super(),K(this,x,{writable:!0,value:void 0}),Z(this,x,new E(e,t?we(t,{secretKey:a}):void 0))}async getSigner(){return f(this,x)}}const Xe={1:"https://safe-transaction-mainnet.safe.global",5:"https://safe-transaction-goerli.safe.global",10:"https://safe-transaction-optimism.safe.global",56:"https://safe-transaction-bsc.safe.global",100:"https://safe-transaction-gnosis-chain.safe.global",137:"https://safe-transaction-polygon.safe.global",43114:"https://safe-transaction-avalanche.safe.global",42161:"https://safe-transaction-arbitrum.safe.global",42220:"https://safe-transaction-celo.safe.global",84531:"https://safe-transaction-base-testnet.safe.global",1313161554:"https://safe-transaction-aurora.safe.global"},et=(()=>new Set(Object.keys(Xe).map(Number)))();class S extends w{get walletName(){return"Safe Wallet"}constructor(e){super(S.id,{...e})}async getConnector(){if(!this.connector){const{SafeConnector:e}=await h(()=>import("./thirdweb-dev-wallets-evm-connectors-safe.browser.esm.ee8e6c82.js"),["assets/thirdweb-dev-wallets-evm-connectors-safe.browser.esm.ee8e6c82.js","assets/index.293c77a4.js","assets/index.09a325bf.css","assets/index.e07c79d7.js","assets/js.ee74d8ff.js","assets/errors-d961f852.browser.esm.61f33de0.js","assets/normalizeChainId-e4cc0175.browser.esm.042707b7.js","assets/constants-1ba9df2b.browser.esm.1400d5f9.js"]);this.connector=new e}return this.connector}async updateChains(e){}getPersonalWallet(){var e;return(e=this.connector)==null?void 0:e.personalWallet}autoConnect(e){return this.connect(e)}}c(S,"meta",{name:"Safe",iconURL:"ipfs://QmbbyxDDmmLQh8DzzeUR6X6B75bESsNUFmbdvS3ZsQ2pN1/SafeToken.svg"});c(S,"id",g.safe);const tt=se;class q extends oe{get walletName(){return"Token Bound Smart Wallet"}constructor(e){super({...e,factoryAddress:e.registryAddress||qe}),this.tbaOptions=e}async getConnector(){if(!this.tbaConnector){this.enableConnectApp&&(await this.wcWallet.init(),this.setupWalletConnectEventsListeners());const{TokenBoundSmartWalletConnector:e}=await h(()=>import("./thirdweb-dev-wallets-evm-connectors-token-bound-smart-wallet.browser.esm.71247685.js"),["assets/thirdweb-dev-wallets-evm-connectors-token-bound-smart-wallet.browser.esm.71247685.js","assets/thirdweb-dev-wallets-evm-connectors-smart-wallet.browser.esm.5f44db31.js","assets/index.293c77a4.js","assets/index.09a325bf.css","assets/index.e07c79d7.js","assets/browser.b0ec30f3.js","assets/url-bc88b2b6.browser.esm.94115fe4.js","assets/constants-1ba9df2b.browser.esm.1400d5f9.js"]);this.tbaConnector=new e(this.tbaOptions)}return this.tbaConnector}}c(q,"meta",{name:"Token Bound Smart Wallet",iconURL:"ipfs://QmeAJVqn17aDNQhjEU3kcWVZCFBrfta8LzaDGkS8Egdiyk/smart-wallet.svg"});c(q,"id",g.tokenBoundSmartWallet);var at={Ethereum:"https://ethereum.rpc.thirdweb.com",Goerli:"https://goerli.rpc.thirdweb.com",Mumbai:"https://mumbai.rpc.thirdweb.com",Polygon:"https://polygon.rpc.thirdweb.com",Avalanche:"https://avalanche.rpc.thirdweb.com",Optimism:"https://optimism.rpc.thirdweb.com",OptimismGoerli:"https://optimism-goerli.rpc.thirdweb.com",BSC:"https://binance.rpc.thirdweb.com",BSCTestnet:"https://binance-testnet.rpc.thirdweb.com",ArbitrumOne:"https://arbitrum.rpc.thirdweb.com",ArbitrumGoerli:"https://arbitrum-goerli.rpc.thirdweb.com",Fantom:"https://fantom.rpc.thirdweb.com",FantomTestnet:"https://fantom-testnet.rpc.thirdweb.com",Sepolia:"https://sepolia.rpc.thirdweb.com",AvalancheFuji:"https://avalanche-fuji.rpc.thirdweb.com"},nt=()=>typeof window<"u"&&window.localStorage.getItem("IS_PAPER_DEV")==="true",it=()=>typeof window<"u"&&window.location.origin.includes("paper.xyz"),rt=()=>{var n;return nt()?(n=window.localStorage.getItem("PAPER_DEV_URL"))!=null?n:"http://localhost:3000":it()?window.location.origin:"https://withpaper.com"};const st="/sdk/2022-08-12/embedded-wallet",b=()=>`${rt().replace("withpaper.com","embedded-wallet.thirdweb.com")}`,ot=n=>`thirdwebEwsWalletUserDetails-${n}`,T=n=>`thirdwebEwsWalletUserId-${n}`,ct="walletToken",W=n=>`${ct}-${n}`,le="a",O=(n,e)=>`${le}-${n}-${e}`,lt=n=>`${le}-${n}`;let m=function(n){return n.LOGGED_OUT="Logged Out",n.LOGGED_IN_WALLET_UNINITIALIZED="Logged In, Wallet Uninitialized",n.LOGGED_IN_NEW_DEVICE="Logged In, New Device",n.LOGGED_IN_WALLET_INITIALIZED="Logged In, Wallet Initialized",n}({});const ee=new Map;class F{constructor(e){let{clientId:t}=e;this.isSupported=!!window.localStorage,this.clientId=t}async getItem(e){var t;return this.isSupported?window.localStorage.getItem(e):(t=ee.get(e))!=null?t:null}async setItem(e,t){if(this.isSupported)return window.localStorage.setItem(e,t);ee.set(e,t)}async removeItem(e){const t=await this.getItem(e);return this.isSupported&&t?(window.localStorage.removeItem(e),!0):!1}async saveAuthCookie(e){await this.setItem(W(this.clientId),e)}async getAuthCookie(){return this.getItem(W(this.clientId))}async removeAuthCookie(){return this.removeItem(W(this.clientId))}async saveDeviceShare(e,t){await this.saveWalletUserId(t),await this.setItem(O(this.clientId,t),e)}async getDeviceShare(){const e=await this.getWalletUserId();return e?this.getItem(O(this.clientId,e)):null}async removeDeviceShare(){const e=await this.getWalletUserId();return e?this.removeItem(O(this.clientId,e)):!1}async getWalletUserId(){return this.getItem(T(this.clientId))}async saveWalletUserId(e){await this.setItem(T(this.clientId),e)}async removeWalletUserId(){return this.removeItem(T(this.clientId))}}function G(n){return new Promise(e=>{setTimeout(e,n*1e3)})}const dt={height:"100%",width:"100%",border:"none",backgroundColor:"transparent",colorScheme:"light",position:"fixed",top:"0px",right:"0px",zIndex:"2147483646",display:"none"},Q=new Map;class ht{constructor(e){let{link:t,iframeId:a,container:i=document.body,iframeStyles:r,onIframeInitialize:s}=e;c(this,"POLLING_INTERVAL_SECONDS",1.4),this.iframeBaseUrl=b();let o=document.getElementById(a);const l=new URL(t),u="2.1.0";if(l.searchParams.set("sdkVersion",u),!o||o.src!==l.href){if(!o){o=document.createElement("iframe");const I={...dt,...r};Object.assign(o.style,I),o.setAttribute("id",a),o.setAttribute("fetchpriority","high"),i.appendChild(o)}o.src=l.href,o.setAttribute("data-version",u);const d=I=>{if(I.data.eventType==="ewsIframeLoaded"){if(window.removeEventListener("message",d),!o){console.warn("thirdweb Iframe not found");return}this.onIframeLoadHandler(o,s)()}};window.addEventListener("message",d)}this.iframe=o}async onIframeLoadedInitVariables(){return{}}onIframeLoadHandler(e,t){return async()=>{await new Promise(async(i,r)=>{var l;const s=new MessageChannel;s.port1.onmessage=u=>{const{data:d}=u;return s.port1.close(),d.success?(Q.set(e.src,!0),t&&t(),i(!0)):r(new Error(d.error))};const o="initIframe";(l=e==null?void 0:e.contentWindow)==null||l.postMessage({eventType:o,data:await this.onIframeLoadedInitVariables()},this.iframeBaseUrl,[s.port2])})}}async call(e){let{procedureName:t,params:a,showIframe:i=!1}=e;for(;!Q.get(this.iframe.src);)await G(this.POLLING_INTERVAL_SECONDS);return i&&(this.iframe.style.display="block",await G(.005)),new Promise((s,o)=>{var u;const l=new MessageChannel;l.port1.onmessage=async d=>{const{data:I}=d;l.port1.close(),i&&(await G(.1),this.iframe.style.display="none"),I.success?s(I.data):o(new Error(I.error))},(u=this.iframe.contentWindow)==null||u.postMessage({eventType:t,data:a},this.iframeBaseUrl,[l.port2])})}destroy(){Q.delete(this.iframe.src)}}class ut extends ht{constructor(e){let{clientId:t,customizationOptions:a}=e;super({iframeId:wt,link:gt({clientId:t,path:st,queryParams:a}).href,container:document.body}),this.clientId=t}async onIframeLoadedInitVariables(){const e=new F({clientId:this.clientId});return{authCookie:await e.getAuthCookie(),deviceShareStored:await e.getDeviceShare(),walletUserId:await e.getWalletUserId(),clientId:this.clientId}}}function gt(n){var r;let{clientId:e,path:t,queryParams:a}=n;const i=new URL(`${t}`,b());if(a)for(const s of Object.keys(a))i.searchParams.set(s,((r=a[s])==null?void 0:r.toString())||"");return i.searchParams.set("clientId",e),i}const wt="thirdweb-embedded-wallet-iframe";class mt{constructor(e){let{querier:t,preLogin:a,postLogin:i,clientId:r}=e;this.LoginQuerier=t,this.preLogin=a,this.postLogin=i,this.clientId=r}async sendEmailLoginOtp(e){let{email:t}=e;return await this.preLogin(),await this.LoginQuerier.call({procedureName:"sendThirdwebEmailLoginOtp",params:{email:t}})}}class It extends mt{constructor(){super(...arguments),c(this,"closeWindow",e=>{let{isWindowOpenedByFn:t,win:a,closeOpenedWindow:i}=e;t?a==null||a.close():a&&i?i(a):a&&a.close()})}async getGoogleLoginUrl(){return await this.LoginQuerier.call({procedureName:"getHeadlessGoogleLoginLink",params:void 0})}async loginWithModal(){await this.preLogin();const e=await this.LoginQuerier.call({procedureName:"loginWithThirdwebModal",params:void 0,showIframe:!0});return this.postLogin(e)}async loginWithEmailOtp(e){let{email:t}=e;await this.preLogin();const a=await this.LoginQuerier.call({procedureName:"loginWithThirdwebModal",params:{email:t},showIframe:!0});return this.postLogin(a)}async loginWithGoogle(e){let t=e==null?void 0:e.openedWindow,a=!1;if(t||(t=window.open("","Login","width=350, height=500"),a=!0),!t)throw new Error("Something went wrong opening pop-up");const[{loginLink:i}]=await Promise.all([this.getGoogleLoginUrl(),this.preLogin()]);t.location.href=i;const r=await new Promise((s,o)=>{const l=window.setInterval(async()=>{!t||t.closed&&(clearInterval(l),window.removeEventListener("message",u),o(new Error("User closed login window")))},1e3),u=async d=>{if(d.origin===b()){if(typeof d.data!="object"){o(new Error("Invalid event data"));return}switch(d.data.eventType){case"userLoginSuccess":{window.removeEventListener("message",u),clearInterval(l),this.closeWindow({isWindowOpenedByFn:a,win:t,closeOpenedWindow:e==null?void 0:e.closeOpenedWindow}),d.data.authResult&&s(d.data.authResult);break}case"userLoginFailed":{window.removeEventListener("message",u),clearInterval(l),this.closeWindow({isWindowOpenedByFn:a,win:t,closeOpenedWindow:e==null?void 0:e.closeOpenedWindow}),o(new Error(d.data.error));break}case"injectDeveloperClientId":{t==null||t.postMessage({eventType:"injectDeveloperClientIdResult",developerClientId:this.clientId},b());break}}}};window.addEventListener("message",u)});return this.postLogin({storedToken:{...r.storedToken,shouldStoreCookieString:!0},walletDetails:{...r.walletDetails,isIframeStorageEnabled:!1}})}async loginWithCustomJwt(e){let{encryptionKey:t,jwt:a}=e;const i=await this.LoginQuerier.call({procedureName:"loginWithCustomJwt",params:{encryptionKey:t,jwt:a}});return this.postLogin(i)}async verifyEmailLoginOtp(e){let{email:t,otp:a,recoveryCode:i}=e;const r=await this.LoginQuerier.call({procedureName:"verifyThirdwebEmailLoginOtp",params:{email:t,otp:a,recoveryCode:i}});return this.postLogin(r)}}class pt{constructor(e){let{clientId:t,querier:a,onAuthSuccess:i}=e;this.clientId=t,this.AuthQuerier=a,this.localStorage=new F({clientId:t}),this.onAuthSuccess=i,this.BaseLogin=new It({postLogin:async r=>this.postLogin(r),preLogin:async()=>{await this.preLogin()},querier:a,clientId:t})}async preLogin(){await this.logout()}async postLogin(e){let{storedToken:t,walletDetails:a}=e;return t.shouldStoreCookieString&&await this.localStorage.saveAuthCookie(t.cookieString),await this.onAuthSuccess({storedToken:t,walletDetails:a})}async loginWithModal(){return await this.preLogin(),this.BaseLogin.loginWithModal()}async loginWithEmailOtp(e){return this.BaseLogin.loginWithEmailOtp(e)}async loginWithCustomJwt(e){return this.BaseLogin.loginWithCustomJwt(e)}async loginWithGoogle(e){return this.BaseLogin.loginWithGoogle(e)}async sendEmailLoginOtp(e){let{email:t}=e;return this.BaseLogin.sendEmailLoginOtp({email:t})}async verifyEmailLoginOtp(e){return this.BaseLogin.verifyEmailLoginOtp(e)}async logout(){const{success:e}=await this.AuthQuerier.call({procedureName:"logout",params:void 0}),t=await this.localStorage.removeAuthCookie(),a=await this.localStorage.removeWalletUserId();return{success:e||t||a}}}class H extends Ie{constructor(e){var r;let{provider:t,clientId:a,querier:i}=e;super(),c(this,"DEFAULT_ETHEREUM_CHAIN_ID",5),this.clientId=a,this.querier=i,this.endpoint=(r=t.connection)==null?void 0:r.url,pe.defineReadOnly(this,"provider",t)}async getAddress(){const{address:e}=await this.querier.call({procedureName:"getAddress",params:void 0});return e}async signMessage(e){var a,i,r;const{signedMessage:t}=await this.querier.call({procedureName:"signMessage",params:{message:e,chainId:(r=(i=await((a=this.provider)==null?void 0:a.getNetwork()))==null?void 0:i.chainId)!=null?r:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return t}async signTransaction(e){var a,i,r;const{signedTransaction:t}=await this.querier.call({procedureName:"signTransaction",params:{transaction:e,chainId:(r=(i=await((a=this.provider)==null?void 0:a.getNetwork()))==null?void 0:i.chainId)!=null?r:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return t}async _signTypedData(e,t,a){var r,s,o;const{signedTypedData:i}=await this.querier.call({procedureName:"signTypedDataV4",params:{domain:e,types:t,message:a,chainId:(o=(s=await((r=this.provider)==null?void 0:r.getNetwork()))==null?void 0:s.chainId)!=null?o:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return i}connect(e){return new H({clientId:this.clientId,provider:e,querier:this.querier})}}class yt{constructor(e){let{clientId:t,chain:a,querier:i}=e;this.clientId=t,this.chain=a,this.walletManagerQuerier=i,this.localStorage=new F({clientId:t})}async postWalletSetUp(e){let{deviceShareStored:t,walletAddress:a,isIframeStorageEnabled:i,walletUserId:r}=e;return i||await this.localStorage.saveDeviceShare(t,r),{walletAddress:a}}async getUserWalletStatus(){const e=await this.walletManagerQuerier.call({procedureName:"getUserStatus",params:void 0});return e.status===m.LOGGED_IN_WALLET_INITIALIZED?{status:m.LOGGED_IN_WALLET_INITIALIZED,...e.user,wallet:this}:e.status===m.LOGGED_IN_NEW_DEVICE?{status:m.LOGGED_IN_WALLET_UNINITIALIZED,...e.user}:e.status===m.LOGGED_IN_WALLET_UNINITIALIZED?{status:m.LOGGED_IN_WALLET_UNINITIALIZED,...e.user}:{status:e.status}}async setChain(e){let{chain:t}=e;this.chain=t}async getEthersJsSigner(e){var a;return new H({clientId:this.clientId,provider:me((a=e==null?void 0:e.rpcEndpoint)!=null?a:at[this.chain]),querier:this.walletManagerQuerier})}}class Et{isClientIdLegacyPaper(e){return e.indexOf("-")>0&&e.length===36}constructor(e){let{clientId:t,chain:a,styles:i,onAuthSuccess:r}=e;if(this.isClientIdLegacyPaper(t))throw new Error("You are using a legacy clientId. Please use the clientId found on the thirdweb dashboard settings page");this.clientId=t,this.querier=new ut({clientId:t,customizationOptions:i}),this.wallet=new yt({clientId:t,chain:a,querier:this.querier}),this.auth=new pt({clientId:t,querier:this.querier,onAuthSuccess:async s=>(r==null||r(s),await this.wallet.postWalletSetUp({...s.walletDetails,walletUserId:s.storedToken.authDetails.userWalletId}),await this.querier.call({procedureName:"initIframe",params:{deviceShareStored:s.walletDetails.deviceShareStored,clientId:this.clientId,walletUserId:s.storedToken.authDetails.userWalletId,authCookie:s.storedToken.cookieString}}),{user:{status:m.LOGGED_IN_WALLET_INITIALIZED,authDetails:s.storedToken.authDetails,wallet:this.wallet,walletAddress:s.walletDetails.walletAddress}})})}async getUser(){return this.wallet.getUserWalletStatus()}}let Mt=function(n){return n.USER_MANAGED="USER_MANAGED",n.CLOUD_MANAGED="AWS_MANAGED",n}({}),ft=function(n){return n.COGNITO="Cognito",n.GOOGLE="Google",n.EMAIL_OTP="EmailOtp",n.CUSTOM_JWT="CustomJWT",n}({});const V="__TW__";class de{constructor(e){this.name=e}getItem(e){return localStorage.getItem(`${V}/${this.name}/${e}`)}setItem(e,t){return localStorage.setItem(`${V}/${this.name}/${e}`,t)}removeItem(e){return localStorage.removeItem(`${V}/${this.name}/${e}`)}}function Lt(n){return new de(n)}class Dt{async getItem(){const e=await navigator.credentials.get({password:!0,unmediated:!0});return e&&"password"in e?e.password:null}async setItem(e,t){const a=await navigator.credentials.create({password:{id:e,name:e,password:t}});if(!a)throw new Error("Credential not created");await navigator.credentials.store(a)}async removeItem(){await navigator.credentials.get({password:!0,unmediated:!0})&&await navigator.credentials.preventSilentAccess()}}const Nt=Object.freeze(Object.defineProperty({__proto__:null,CredentialsStorage:Dt,LocalStorage:de,createLocalStorage:Lt,SmartWallet:oe,WalletConnectHandler:ye,WalletConnectV2Handler:Ee,getAllSigners:Me,getAllSmartWallets:fe,getSmartWalletAddress:Le,isSmartWalletDeployed:De,AbstractClientWallet:w,AsyncLocalStorage:Ae,DEFAULT_DAPP_META:Ce,createAsyncLocalStorage:re,isWalletAnalyticsEnabled:Se,setWalletAnalyticsEnabled:_e,EIP155_SIGNING_METHODS:Ne,walletIds:g,WagmiConnector:Ge,AddChainError:Qe,ChainNotConfiguredError:Ve,ProviderRpcError:Be,SwitchChainError:Ye,UserRejectedRequestError:Ke,normalizeChainId:Ze,Connector:ve,WagmiAdapter:p,OKXWallet:j,getInjectedOKXProvider:ce,getInjectedMetamaskProvider:Te,getInjectedPhantomProvider:We,getInjectedRainbowProvider:Oe,getInjectedCoinbaseProvider:be,assertWindowEthereum:te,PaperWallet:L,BloctoWallet:D,CoinbaseWallet:je,EmbeddedWallet:y,EthersWallet:Fe,FrameWallet:U,InjectedWallet:P,LocalWallet:A,isValidPrivateKey:Y,SignerWallet:Ue,MagicLink:C,MetaMaskWallet:Pe,PhantomWallet:ze,PrivateKeyWallet:$e,RainbowWallet:Re,SafeSupportedChainsSet:et,SafeWallet:S,TrustWallet:ke,WalletConnect:se,WalletConnectV1:tt,ZerionWallet:xe,TokenBoundSmartWallet:q,AUTH_TOKEN_LOCAL_STORAGE_NAME:W,DEVICE_SHARE_LOCAL_STORAGE_NAME:O,DEVICE_SHARE_LOCAL_STORAGE_NAME_DEPRECATED:lt,EmbeddedWalletSdk:Et,UserWalletStatus:m,WALLET_USER_DETAILS_LOCAL_STORAGE_NAME:ot,WALLET_USER_ID_LOCAL_STORAGE_NAME:T,AuthProvider:ft,RecoveryShareManagement:Mt},Symbol.toStringTag,{value:"Module"}));export{Xe as C,Et as E,m as U,at as e,ce as g,rt as i,Nt as t};
