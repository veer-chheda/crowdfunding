import{q,s as Q,a2 as z,I as F,b as g,w as H,e as x,a4 as $,_ as V,f as A,h as M}from"./index.293c77a4.js";import{i as p,e as K}from"./thirdweb-dev-wallets.browser.esm.0c4493af.js";import{n as J}from"./normalizeChainId-e4cc0175.browser.esm.042707b7.js";import"./errors-d961f852.browser.esm.61f33de0.js";import"./constants-1ba9df2b.browser.esm.1400d5f9.js";var B=Object.defineProperty,Z=Object.defineProperties,X=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,P=(t,e,i)=>e in t?B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,h=(t,e)=>{for(var i in e||(e={}))Y.call(e,i)&&P(t,i,e[i]);if(C)for(var i of C(e))ee.call(e,i)&&P(t,i,e[i]);return t},f=(t,e)=>Z(t,X(e)),s=(t,e,i)=>new Promise((r,a)=>{var n=l=>{try{c(i.next(l))}catch(d){a(d)}},o=l=>{try{c(i.throw(l))}catch(d){a(d)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(n,o);c((i=i.apply(t,e)).next())}),_="/sdk/2022-08-12/embedded-wallet",te=t=>`paperEwsWalletUserDetails-${t}`,w=t=>`paperEwsWalletUserId-${t}`,ie="walletToken",y=t=>`${ie}-${t}`,G="a",E=(t,e)=>`${G}-${t}-${e}`,re=t=>`${G}-${t}`,L=(t=>(t.USER_MANAGED="USER_MANAGED",t.AWS_MANAGED="AWS_MANAGED",t))(L||{}),U=(t=>(t.PAPER_EMAIL_OTP="PaperEmailOTP",t.GOOGLE="Google",t.TWITTER="Twitter",t.COGNITO="Cognito",t.AUTH0="Auth0",t.CUSTOM_JWT="CustomJWT",t))(U||{}),v=(t=>(t.LOGGED_OUT="Logged Out",t.LOGGED_IN_WALLET_INITIALIZED="Logged In, Wallet Initialized",t))(v||{}),R=(t=>(t.LOGGED_OUT="Logged Out",t.LOGGED_IN_WALLET_UNINITIALIZED="Logged In, Wallet Uninitialized",t.LOGGED_IN_NEW_DEVICE="Logged In, New Device",t.LOGGED_IN_WALLET_INITIALIZED="Logged In, Wallet Initialized",t))(R||{}),N=new Map,W=class{constructor({clientId:t}){this.isSupported=typeof window<"u"&&!!window.localStorage,this.clientId=t}getItem(t){return s(this,null,function*(){var e;return this.isSupported?window.localStorage.getItem(t):(e=N.get(t))!=null?e:null})}setItem(t,e){return s(this,null,function*(){if(this.isSupported)return window.localStorage.setItem(t,e);N.set(t,e)})}removeItem(t){return s(this,null,function*(){let e=yield this.getItem(t);return this.isSupported&&e?(window.localStorage.removeItem(t),!0):!1})}saveAuthCookie(t){return s(this,null,function*(){yield this.setItem(y(this.clientId),t)})}getAuthCookie(){return s(this,null,function*(){return this.getItem(y(this.clientId))})}removeAuthCookie(){return s(this,null,function*(){return this.removeItem(y(this.clientId))})}saveDeviceShare(t,e){return s(this,null,function*(){yield this.saveWalletUserId(e),yield this.setItem(E(this.clientId,e),t)})}getDeviceShare(){return s(this,null,function*(){let t=yield this.getWalletUserId();return t?this.getItem(E(this.clientId,t)):null})}removeDeviceShare(){return s(this,null,function*(){let t=yield this.getWalletUserId();return t?this.removeItem(E(this.clientId,t)):!1})}getWalletUserId(){return s(this,null,function*(){return this.getItem(w(this.clientId))})}saveWalletUserId(t){return s(this,null,function*(){yield this.setItem(w(this.clientId),t)})}removeWalletUserId(){return s(this,null,function*(){return this.removeItem(w(this.clientId))})}};function I(t){return new Promise(e=>{setTimeout(e,t*1e3)})}var ne={height:"100%",width:"100%",border:"none",backgroundColor:"transparent",colorScheme:"light",position:"fixed",top:"0px",right:"0px",zIndex:"2147483646",display:"none"},S=new Map,ae=class{constructor({link:t,iframeId:e,container:i=document.body,iframeStyles:r,onIframeInitialize:a}){this.POLLING_INTERVAL_SECONDS=1.4,this.POST_LOAD_BUFFER_SECONDS=1;let n=document.getElementById(e),o=new URL(t),c="1.2.5";if(o.searchParams.set("sdkVersion",c),!n||n.src!=o.href){if(!n){n=document.createElement("iframe");let l=h(h({},ne),r);Object.assign(n.style,l),n.setAttribute("id",e),n.setAttribute("fetchpriority","high"),i.appendChild(n)}n.src=o.href,n.setAttribute("data-version",c),n.onload=this.onIframeLoadHandler(n,this.POST_LOAD_BUFFER_SECONDS,a)}this.iframe=n}onIframeLoadedInitVariables(){return s(this,null,function*(){return{}})}onIframeLoadHandler(t,e,i){return()=>s(this,null,function*(){yield new Promise((r,a)=>s(this,null,function*(){var n;let o=new MessageChannel;o.port1.onmessage=l=>{let{data:d}=l;return o.port1.close(),d.success?(S.set(t.src,!0),i&&i(),r(!0)):a(new Error(d.error))},yield I(e);let c="initIframe";(n=t==null?void 0:t.contentWindow)==null||n.postMessage({eventType:c,data:yield this.onIframeLoadedInitVariables()},`${p()}${_}`,[o.port2])}))})}call(t){return s(this,arguments,function*({procedureName:e,params:i,showIframe:r=!1,injectRecoveryCode:a={isInjectRecoveryCode:!1}}){for(;!S.get(this.iframe.src);)yield I(this.POLLING_INTERVAL_SECONDS);return r&&(this.iframe.style.display="block",yield I(.005)),new Promise((n,o)=>{var c;if(a.isInjectRecoveryCode){let d=u=>s(this,null,function*(){var O,D;if(u.origin!==p()||u.data.type!=="paper_getRecoveryCode"||typeof u.data.userWalletId!="string")return;let j=yield(O=a.getRecoveryCode)==null?void 0:O.call(a,u.data.userWalletId);(D=this.iframe.contentWindow)==null||D.postMessage({type:"paper_getRecoveryCode_response",recoveryCode:j},p()),window.removeEventListener("message",d)});window.addEventListener("message",d)}let l=new MessageChannel;l.port1.onmessage=d=>s(this,null,function*(){let{data:u}=d;l.port1.close(),r&&(yield I(.1),this.iframe.style.display="none"),u.success?n(u.data):o(new Error(u.error))}),(c=this.iframe.contentWindow)==null||c.postMessage({eventType:e,data:i},`${p()}${_}`,[l.port2])})})}destroy(){S.delete(this.iframe.src)}},se=class extends ae{constructor({clientId:t,customizationOptions:e}){super({iframeId:le,link:oe({clientId:t,path:_,queryParams:e}).href,container:document.body}),this.clientId=t}onIframeLoadedInitVariables(){return s(this,null,function*(){let t=new W({clientId:this.clientId});return{authCookie:yield t.getAuthCookie(),deviceShareStored:yield t.getDeviceShare(),walletUserId:yield t.getWalletUserId(),clientId:this.clientId}})}};function oe({clientId:t,path:e,queryParams:i}){var r;let a=new URL(e,p());if(i)for(let n of Object.keys(i))a.searchParams.set(n,((r=i[n])==null?void 0:r.toString())||"");return a.searchParams.set("clientId",t),a}var le="paper-embedded-wallet-iframe",b=class{constructor({querier:t,preLogin:e,postLogin:i,clientId:r}){this.LoginQuerier=t,this.preLogin=e,this.postLogin=i,this.clientId=r}sendPaperEmailLoginOtp(t){return s(this,arguments,function*({email:e,recoveryShareManagement:i}){yield this.preLogin();let{isNewUser:r,isNewDevice:a,recoveryShareManagement:n}=yield this.LoginQuerier.call({procedureName:"sendPaperEmailLoginOtp",params:{email:e,recoveryShareManagement:i}});return{isNewUser:r,isNewDevice:a,recoveryShareManagement:n}})}},de=class extends b{constructor(){super(...arguments),this.closeWindow=({isWindowOpenedByFn:t,win:e,closeOpenedWindow:i})=>{t?e==null||e.close():e&&i?i(e):e&&e.close()}}loginWithPaperModal(){return s(this,null,function*(){yield this.preLogin();let t=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:{recoveryShareManagement:"AWS_MANAGED"},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(t)})}getGoogleLoginUrl(){return s(this,null,function*(){return yield this.LoginQuerier.call({procedureName:"getHeadlessGoogleLoginLink",params:void 0})})}loginWithGoogle(t){return s(this,null,function*(){yield this.preLogin();let e=t==null?void 0:t.openedWindow,i=!1;if(e||(e=window.open("","Login","width=350, height=500"),i=!0),!e)throw new Error("Something went wrong opening pop-up");yield this.preLogin();let{loginLink:r}=yield this.getGoogleLoginUrl();e.location.href=r;let a=yield new Promise((n,o)=>{let c=window.setInterval(()=>s(this,null,function*(){e&&e.closed&&(clearInterval(c),window.removeEventListener("message",l),o(new Error("User closed login window")))}),1e3),l=d=>s(this,null,function*(){if(d.origin===p()){if(typeof d.data!="object"){o(new Error("Invalid event data"));return}switch(d.data.eventType){case"userLoginSuccess":{window.removeEventListener("message",l),clearInterval(c),this.closeWindow({isWindowOpenedByFn:i,win:e,closeOpenedWindow:t==null?void 0:t.closeOpenedWindow}),d.data.authResult&&n(d.data.authResult);break}case"userLoginFailed":{window.removeEventListener("message",l),clearInterval(c),this.closeWindow({isWindowOpenedByFn:i,win:e,closeOpenedWindow:t==null?void 0:t.closeOpenedWindow}),o(new Error(d.data.error));break}case"injectDeveloperClientId":{e==null||e.postMessage({eventType:"injectDeveloperClientIdResult",developerClientId:this.clientId},p());break}}}});window.addEventListener("message",l)});return this.postLogin({storedToken:f(h({},a.storedToken),{shouldStoreCookieString:!0}),walletDetails:f(h({},a.walletDetails),{isIframeStorageEnabled:!1})})})}loginWithPaperEmailOtp(t){return s(this,arguments,function*({email:e}){yield this.preLogin();let i=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:{email:e,recoveryShareManagement:"AWS_MANAGED"},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(i)})}verifyPaperEmailLoginOtp(t){return s(this,arguments,function*({email:e,otp:i}){let r=yield this.LoginQuerier.call({procedureName:"verifyPaperEmailLoginOtp",params:{email:e,otp:i,recoveryShareManagement:"AWS_MANAGED"},injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(r)})}},ce=class extends b{loginWithPaperModal(t){return s(this,null,function*(){yield this.preLogin();let e=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:void 0,showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0,getRecoveryCode:t==null?void 0:t.getRecoveryCode}});return this.postLogin(e)})}loginWithGoogle(t){return s(this,null,function*(){throw new Error("loginWithGoogle is not yet supported in the RecoveryShareManagement.USER_MANAGED flow. Please use RecoveryShareManagement.AWS_MANAGED instead.")})}loginWithPaperEmailOtp(t){return s(this,arguments,function*({email:e,recoveryCode:i}){yield this.preLogin();let r=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:{email:e,recoveryCode:i},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(r)})}verifyPaperEmailLoginOtp(t){return s(this,arguments,function*({email:e,otp:i,recoveryCode:r}){let a=yield this.LoginQuerier.call({procedureName:"verifyPaperEmailLoginOtp",params:{email:e,otp:i,recoveryCode:r},injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(a)})}},ue=class{constructor({clientId:t,advancedOptions:e,querier:i,onAuthSuccess:r}){var a;this.clientId=t,this.advancedOptions={recoveryShareManagement:(a=e==null?void 0:e.recoveryShareManagement)!=null?a:"AWS_MANAGED"},this.AuthQuerier=i,this.localStorage=new W({clientId:t}),this.onAuthSuccess=r,this.userManagedLogin=new ce({postLogin:n=>s(this,null,function*(){return this.postLogin(n)}),preLogin:()=>s(this,null,function*(){yield this.preLogin()}),querier:i,clientId:t}),this.awsManagedLogin=new de({postLogin:n=>s(this,null,function*(){return this.postLogin(n)}),preLogin:()=>s(this,null,function*(){yield this.preLogin()}),querier:i,clientId:t})}preLogin(){return s(this,null,function*(){yield this.logout()})}postLogin(t){return s(this,arguments,function*({storedToken:e,walletDetails:i}){return e.shouldStoreCookieString&&(yield this.localStorage.saveAuthCookie(e.cookieString)),yield this.onAuthSuccess({storedToken:e,walletDetails:i})})}loginWithJwtAuth(t){return s(this,arguments,function*({token:e,authProvider:i,recoveryCode:r}){yield this.preLogin();let a=yield this.AuthQuerier.call({procedureName:"loginWithJwtAuthCallback",params:{token:e,authProvider:i,recoveryCode:r}});return this.postLogin(a)})}loginWithPaperModal(t){return s(this,null,function*(){return yield this.preLogin(),this.advancedOptions.recoveryShareManagement==="AWS_MANAGED"?this.awsManagedLogin.loginWithPaperModal():this.userManagedLogin.loginWithPaperModal(t)})}loginWithPaperEmailOtp(t){return s(this,null,function*(){return this.advancedOptions.recoveryShareManagement==="AWS_MANAGED"?this.awsManagedLogin.loginWithPaperEmailOtp({email:t.email}):this.userManagedLogin.loginWithPaperEmailOtp(t)})}loginWithGoogle(t){return s(this,null,function*(){return this.advancedOptions.recoveryShareManagement==="AWS_MANAGED"?this.awsManagedLogin.loginWithGoogle(t):this.userManagedLogin.loginWithGoogle()})}sendPaperEmailLoginOtp(t){return s(this,arguments,function*({email:e}){return this.advancedOptions.recoveryShareManagement==="AWS_MANAGED"?this.awsManagedLogin.sendPaperEmailLoginOtp({email:e,recoveryShareManagement:"AWS_MANAGED"}):this.userManagedLogin.sendPaperEmailLoginOtp({email:e})})}verifyPaperEmailLoginOtp(t){return s(this,null,function*(){return this.advancedOptions.recoveryShareManagement==="AWS_MANAGED"?this.awsManagedLogin.verifyPaperEmailLoginOtp(t):this.userManagedLogin.verifyPaperEmailLoginOtp(t)})}logout(){return s(this,null,function*(){let{success:t}=yield this.AuthQuerier.call({procedureName:"logout",params:void 0}),e=yield this.localStorage.removeAuthCookie(),i=yield this.localStorage.removeWalletUserId();return{success:t||e||i}})}},T=class{constructor({chain:t,clientId:e,querier:i}){this.chain=t,this.clientId=e,this.gaslessTransactionQuerier=i}callContract(t){return s(this,arguments,function*({contractAddress:e,methodArgs:i,methodInterface:r}){return yield this.gaslessTransactionQuerier.call({procedureName:"callContract",params:{chain:this.chain,contractAddress:e,method:{args:i,stub:r}}})})}},k=class extends Q{constructor({provider:t,clientId:e,querier:i}){var r;super(),this.DEFAULT_ETHEREUM_CHAIN_ID=5,this.clientId=e,this.querier=i,this.endpoint=(r=t.connection)==null?void 0:r.url,z(this,"provider",t)}getAddress(){return s(this,null,function*(){let{address:t}=yield this.querier.call({procedureName:"getAddress",params:void 0});return t})}signMessage(t){return s(this,null,function*(){var e,i,r,a;let n=yield(e=this.provider)==null?void 0:e.getNetwork();n&&n._defaultProvider;let{signedMessage:o}=yield this.querier.call({procedureName:"signMessage",params:{message:t,chainId:(a=(r=yield(i=this.provider)==null?void 0:i.getNetwork())==null?void 0:r.chainId)!=null?a:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return o})}signTransaction(t){return s(this,null,function*(){var e,i,r;let{signedTransaction:a}=yield this.querier.call({procedureName:"signTransaction",params:{transaction:t,chainId:(r=(i=yield(e=this.provider)==null?void 0:e.getNetwork())==null?void 0:i.chainId)!=null?r:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return a})}_signTypedData(t,e,i){return s(this,null,function*(){var r,a,n;let{signedTypedData:o}=yield this.querier.call({procedureName:"signTypedDataV4",params:{domain:t,types:e,message:i,chainId:(n=(a=yield(r=this.provider)==null?void 0:r.getNetwork())==null?void 0:a.chainId)!=null?n:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return o})}connect(t){return new k({clientId:this.clientId,provider:t,querier:this.querier})}},he=class{constructor({clientId:t,chain:e,querier:i}){this.clientId=t,this.chain=e,this.walletManagerQuerier=i,this.gasless=new T({chain:e,clientId:t,querier:i}),this.localStorage=new W({clientId:t})}postWalletSetUp(t){return s(this,arguments,function*({deviceShareStored:e,walletAddress:i,isIframeStorageEnabled:r,walletUserId:a}){return r||(yield this.localStorage.saveDeviceShare(e,a)),{walletAddress:i}})}getUserWalletStatus(){return s(this,null,function*(){let t=yield this.walletManagerQuerier.call({procedureName:"getUserStatus",params:void 0});return t.status==="Logged In, Wallet Initialized"?{status:"Logged In, Wallet Initialized",user:f(h({},t.user),{wallet:this})}:t})}setChain(t){return s(this,arguments,function*({chain:e}){this.chain=e,this.gasless=new T({chain:e,clientId:this.clientId,querier:this.walletManagerQuerier})})}getEthersJsSigner(t){return s(this,null,function*(){var e;return new k({clientId:this.clientId,provider:q((e=t==null?void 0:t.rpcEndpoint)!=null?e:K[this.chain]),querier:this.walletManagerQuerier})})}},ge=class{constructor({clientId:t,chain:e,styles:i,advancedOptions:r,onAuthSuccess:a}){this.clientId=t,this.querier=new se({clientId:t,customizationOptions:i}),this.wallet=new he({clientId:t,chain:e,querier:this.querier}),this.auth=new ue({clientId:t,advancedOptions:h({recoveryShareManagement:"USER_MANAGED"},r!=null?r:{}),querier:this.querier,onAuthSuccess:n=>s(this,null,function*(){return yield this.wallet.postWalletSetUp(f(h({},n.walletDetails),{walletUserId:n.storedToken.authDetails.userWalletId})),yield this.querier.call({procedureName:"initIframe",params:{deviceShareStored:n.walletDetails.deviceShareStored,clientId:this.clientId,walletUserId:n.storedToken.authDetails.userWalletId,authCookie:n.storedToken.cookieString}}),a==null||a(n),{user:{status:"Logged In, Wallet Initialized",authDetails:n.storedToken.authDetails,wallet:this.wallet,walletAddress:n.walletDetails.walletAddress}}})})}getUser(){return s(this,null,function*(){let t=yield this.wallet.getUserWalletStatus();switch(t.status){case"Logged In, New Device":case"Logged In, Wallet Uninitialized":return yield this.auth.logout(),this.getUser();case"Logged Out":return{status:"Logged Out"};case"Logged In, Wallet Initialized":return h({status:"Logged In, Wallet Initialized"},t.user)}})}};const pe=Object.freeze(Object.defineProperty({__proto__:null,AUTH_TOKEN_LOCAL_STORAGE_NAME:y,AuthProvider:U,DEVICE_SHARE_LOCAL_STORAGE_NAME:E,DEVICE_SHARE_LOCAL_STORAGE_NAME_DEPRECATED:re,PaperEmbeddedWalletSdk:ge,RecoveryShareManagement:L,UserStatus:v,UserWalletStatus:R,WALLET_USER_DETAILS_LOCAL_STORAGE_NAME:te,WALLET_USER_ID_LOCAL_STORAGE_NAME:w},Symbol.toStringTag,{value:"Module"}));var m=new WeakMap;class Ee extends F{constructor(e){super(),g(this,"id",H.paper),g(this,"name","Paper Wallet"),g(this,"ready",!0),g(this,"user",null),x(this,m,{writable:!0,value:void 0}),g(this,"onAccountsChanged",async i=>{i.length===0?await this.onDisconnect():this.emit("change",{account:$(i[0])})}),g(this,"onChainChanged",i=>{const r=J(i),a=this.options.chains.findIndex(n=>n.chainId===r)===-1;this.emit("change",{chain:{id:r,unsupported:a}})}),g(this,"onDisconnect",async()=>{this.emit("disconnect")}),this.options=e}getPaperSDK(){return this.paper||(this.paper=new Promise(async(e,i)=>{var a;const r=(a=this.options.advancedOptions)==null?void 0:a.recoveryShareManagement;try{const{PaperEmbeddedWalletSdk:n}=await V(()=>Promise.resolve().then(()=>pe),void 0),o={AWS_MANAGED:L.AWS_MANAGED,USER_MANAGED:L.USER_MANAGED},c=r?o[r]:void 0;e(new n({advancedOptions:{recoveryShareManagement:c},clientId:this.options.clientId,chain:"Ethereum",styles:this.options.styles,onAuthSuccess:this.options.onAuthSuccess}))}catch(n){i(n)}})),this.paper}async connect(e){const i=await this.getPaperSDK();if(!i)throw new Error("Paper SDK not initialized");const r=await i.getUser();switch(r.status){case v.LOGGED_OUT:{let a;if(e!=null&&e.googleLogin){const n=e.googleLogin;a=await i.auth.loginWithGoogle(typeof n=="object"?n:void 0)}else(e==null?void 0:e.email)&&(e==null?void 0:e.otp)?a=await i.auth.verifyPaperEmailLoginOtp({email:e.email,otp:e.otp,recoveryCode:e.recoveryCode}):e!=null&&e.email?a=await i.auth.loginWithPaperEmailOtp({email:e.email}):a=await i.auth.loginWithPaperModal();this.user=a.user;break}case v.LOGGED_IN_WALLET_INITIALIZED:{typeof(e==null?void 0:e.googleLogin)=="object"&&e.googleLogin.closeOpenedWindow&&e.googleLogin.openedWindow&&e.googleLogin.closeOpenedWindow(e.googleLogin.openedWindow),this.user=r;break}}if(!this.user)throw new Error("Error connecting User");return e!=null&&e.chainId&&this.switchChain(e.chainId),this.setupListeners(),this.getAddress()}async disconnect(){const e=await this.paper;await(e==null?void 0:e.auth.logout()),A(this,m,void 0),this.user=null}async getAddress(){return(await this.getSigner()).getAddress()}async isConnected(){try{return!!await this.getAddress()}catch{return!1}}async getProvider(){const e=await this.getSigner();if(!e.provider)throw new Error("Provider not found");return e.provider}async getSigner(){var i;if(M(this,m))return M(this,m);if(!this.user){const a=await(await this.getPaperSDK()).getUser();switch(a.status){case v.LOGGED_IN_WALLET_INITIALIZED:{this.user=a;break}}}const e=await((i=this.user)==null?void 0:i.wallet.getEthersJsSigner({rpcEndpoint:this.options.chain.rpc[0]||""}));if(!e)throw new Error("Signer not found");return A(this,m,e),e}async isAuthorized(){return!1}async switchChain(e){var r,a;const i=this.options.chains.find(n=>n.chainId===e);if(!i)throw new Error("Chain not configured");await((r=this.user)==null?void 0:r.wallet.setChain({chain:"Ethereum"})),A(this,m,await((a=this.user)==null?void 0:a.wallet.getEthersJsSigner({rpcEndpoint:i.rpc[0]||""}))),this.emit("change",{chain:{id:e,unsupported:!1}})}async setupListeners(){const e=await this.getProvider();e.on&&(e.on("accountsChanged",this.onAccountsChanged),e.on("chainChanged",this.onChainChanged),e.on("disconnect",this.onDisconnect))}updateChains(e){this.options.chains=e}async getEmail(){if(await this.getProvider(),!this.user)throw new Error("No user found, Paper Wallet is not connected");return this.user.authDetails.email}}export{Ee as PaperWalletConnector};
